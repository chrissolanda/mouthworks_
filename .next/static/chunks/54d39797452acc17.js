(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},26548,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(91432),a=e.i(77395),n=e.i(70065),l=e.i(67881),i=e.i(23750),d=e.i(60289),o=e.i(61911),c=e.i(87316),x=e.i(77176),m=e.i(61659),u=e.i(88844),h=e.i(17923),p=e.i(39616),g=e.i(7233),f=e.i(27612),j=e.i(55436),y=e.i(63209);let b=(0,e.i(75254).default)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);var N=e.i(44496),v=e.i(37727);function C({onClose:e,onSubmit:r}){let[a,n]=(0,s.useState)({name:"",quantity:"",minQuantity:"",category:"Supplies",supplier:""}),d=e=>{let{name:t,value:s}=e.target;n(e=>({...e,[t]:s}))};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-card rounded-lg shadow-2xl max-w-md w-full max-h-96 overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border sticky top-0 bg-card",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Add Inventory Item"}),(0,t.jsx)("button",{onClick:e,className:"p-1 hover:bg-muted rounded-lg transition-colors",children:(0,t.jsx)(v.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a.name&&a.quantity&&a.minQuantity&&(r({...a,quantity:Number.parseInt(a.quantity),minQuantity:Number.parseInt(a.minQuantity)}),n({name:"",quantity:"",minQuantity:"",category:"Supplies",supplier:""}))},className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Item Name"}),(0,t.jsx)(i.Input,{name:"name",value:a.name,onChange:d,placeholder:"e.g., Latex Gloves",className:"border-border",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Quantity"}),(0,t.jsx)(i.Input,{name:"quantity",type:"number",value:a.quantity,onChange:d,placeholder:"0",className:"border-border",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Minimum Level"}),(0,t.jsx)(i.Input,{name:"minQuantity",type:"number",value:a.minQuantity,onChange:d,placeholder:"0",className:"border-border",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Category"}),(0,t.jsxs)("select",{name:"category",value:a.category,onChange:d,className:"w-full px-3 py-2 border border-border rounded-lg",children:[(0,t.jsx)("option",{children:"Supplies"}),(0,t.jsx)("option",{children:"Medication"}),(0,t.jsx)("option",{children:"Orthodontic"}),(0,t.jsx)("option",{children:"Material"}),(0,t.jsx)("option",{children:"Equipment"}),(0,t.jsx)("option",{children:"Other"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Supplier"}),(0,t.jsx)(i.Input,{name:"supplier",value:a.supplier,onChange:d,placeholder:"Supplier name",className:"border-border"})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,t.jsx)(l.Button,{type:"button",onClick:e,variant:"outline",className:"flex-1 bg-transparent",children:"Cancel"}),(0,t.jsx)(l.Button,{type:"submit",className:"flex-1 bg-primary hover:bg-primary/90 text-primary-foreground",children:"Add Item"})]})]})]})})}function w(){let{user:e}=(0,r.useAuth)(),[v,w]=(0,s.useState)([]),[S,q]=(0,s.useState)([]),[k,I]=(0,s.useState)(!0),[A,T]=(0,s.useState)(!1),[D,L]=(0,s.useState)("");(0,s.useEffect)(()=>{Q()},[]);let Q=async()=>{try{I(!0);let[e,t]=await Promise.all([N.inventoryService.getAll(),N.supplyRequestService.getAll()]),s=(e||[]).map(e=>{let t="ok";return e.quantity<=0?t="critical":e.quantity<=e.min_quantity&&(t="low"),{...e,status:t}});w(s),q(t||[])}catch(e){console.error("[v0] Error loading inventory:",e)}finally{I(!1)}},R=[{label:"Dashboard",icon:(0,t.jsx)(d.LayoutDashboard,{className:"w-5 h-5"}),href:"/hr/dashboard"},{label:"Patients",icon:(0,t.jsx)(o.Users,{className:"w-5 h-5"}),href:"/hr/patients"},{label:"Appointments",icon:(0,t.jsx)(c.Calendar,{className:"w-5 h-5"}),href:"/hr/appointments"},{label:"Treatments",icon:(0,t.jsx)(x.Bluetooth,{className:"w-5 h-5"}),href:"/hr/treatments"},{label:"Payments",icon:(0,t.jsx)(m.CreditCard,{className:"w-5 h-5"}),href:"/hr/payments"},{label:"Inventory",icon:(0,t.jsx)(u.Package,{className:"w-5 h-5"}),href:"/hr/inventory"},{label:"Reports",icon:(0,t.jsx)(h.BarChart3,{className:"w-5 h-5"}),href:"/hr/reports"},{label:"Settings",icon:(0,t.jsx)(p.Settings,{className:"w-5 h-5"}),href:"/hr/settings"}],B=async e=>{try{let t=await N.inventoryService.create(e);w([t,...v]),T(!1)}catch(e){console.error("[v0] Error adding inventory:",e instanceof Error?e.message:JSON.stringify(e))}},E=async e=>{if(confirm("Are you sure?"))try{await N.inventoryService.delete(e),w(v.filter(t=>t.id!==e))}catch(e){console.error("[v0] Error deleting inventory:",e)}},P=async e=>{try{let t=await N.supplyRequestService.update(e,{status:"approved"});q(S.map(s=>s.id===e?t:s))}catch(e){console.error("[v0] Error approving request:",e)}},U=async e=>{try{let t=await N.supplyRequestService.update(e,{status:"rejected"});q(S.map(s=>s.id===e?t:s))}catch(e){console.error("[v0] Error rejecting request:",e)}},H=v.filter(e=>e.name.toLowerCase().includes(D.toLowerCase())||e.category?.toLowerCase().includes(D.toLowerCase())),M=v.filter(e=>"ok"!==e.status);return(0,t.jsxs)(a.default,{navItems:R,title:"Inventory Management",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Inventory Management"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Track dental supplies and materials"})]}),(0,t.jsxs)(l.Button,{onClick:()=>T(!0),className:"bg-primary hover:bg-primary/90 text-primary-foreground gap-2",children:[(0,t.jsx)(g.Plus,{className:"w-4 h-4"}),"Add Item"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)(n.Card,{className:"hover:shadow-md transition-shadow",children:[(0,t.jsx)(n.CardHeader,{className:"pb-3",children:(0,t.jsx)(n.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total Items"})}),(0,t.jsxs)(n.CardContent,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-primary",children:v.length}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"In stock"})]})]}),(0,t.jsxs)(n.Card,{className:"hover:shadow-md transition-shadow",children:[(0,t.jsx)(n.CardHeader,{className:"pb-3",children:(0,t.jsx)(n.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Low Stock"})}),(0,t.jsxs)(n.CardContent,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-yellow-600",children:M.length}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Need attention"})]})]}),(0,t.jsxs)(n.Card,{className:"hover:shadow-md transition-shadow",children:[(0,t.jsx)(n.CardHeader,{className:"pb-3",children:(0,t.jsx)(n.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Critical"})}),(0,t.jsxs)(n.CardContent,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-destructive",children:v.filter(e=>"critical"===e.status).length}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Urgent restock"})]})]}),(0,t.jsxs)(n.Card,{className:"hover:shadow-md transition-shadow",children:[(0,t.jsx)(n.CardHeader,{className:"pb-3",children:(0,t.jsx)(n.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Pending Requests"})}),(0,t.jsxs)(n.CardContent,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:S.filter(e=>"pending"===e.status).length}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Staff requests"})]})]})]}),(0,t.jsx)(n.Card,{children:(0,t.jsx)(n.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(j.Search,{className:"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground"}),(0,t.jsx)(i.Input,{type:"text",placeholder:"Search by item name or category...",value:D,onChange:e=>L(e.target.value),className:"pl-10 border-border"})]})})}),(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{children:"Stock Inventory"}),(0,t.jsxs)(n.CardDescription,{children:[H.length," item(s)"]})]}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-border",children:[(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Item Name"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Category"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Quantity"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Min Level"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Supplier"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Status"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:H.map(e=>{let s=S.filter(t=>t.item_id===e.id&&"pending"===t.status);return(0,t.jsxs)("tr",{className:"border-b border-border hover:bg-muted/50 transition-colors",children:[(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-foreground",children:e.name}),s.length>0&&(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 w-fit px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700",children:[(0,t.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-700 rounded-full"}),s.length," pending request",1!==s.length?"s":""]})]})}),(0,t.jsx)("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:e.category||"-"}),(0,t.jsx)("td",{className:"py-3 px-4 text-sm font-semibold text-foreground",children:e.quantity}),(0,t.jsx)("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:e.min_quantity}),(0,t.jsx)("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:e.supplier||"-"}),(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsx)("div",{className:"flex flex-col gap-2",children:(0,t.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold w-fit ${"ok"===e.status?"bg-green-100 text-green-700":"low"===e.status?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:["critical"===e.status&&(0,t.jsx)(y.AlertCircle,{className:"w-3 h-3"}),"low"===e.status&&(0,t.jsx)(b,{className:"w-3 h-3"}),e.status.charAt(0).toUpperCase()+e.status.slice(1)]})})}),(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsx)("button",{onClick:()=>E(e.id),className:"p-1.5 hover:bg-destructive/10 rounded-lg transition-colors text-destructive",children:(0,t.jsx)(f.Trash2,{className:"w-4 h-4"})})})]},e.id)})})]})})})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{children:"Supply Requests from Staff & Dentists"}),(0,t.jsxs)(n.CardDescription,{children:[S.filter(e=>"pending"===e.status).length," pending request(s)"]})]}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("div",{className:"space-y-3",children:0===S.length?(0,t.jsx)("p",{className:"text-center text-muted-foreground py-4",children:"No requests"}):S.map(e=>(0,t.jsxs)("div",{className:`p-4 border rounded-lg ${"pending"===e.status?"border-yellow-200 bg-yellow-50/50":"approved"===e.status?"border-green-200 bg-green-50/50":"border-red-200 bg-red-50/50"}`,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-foreground",children:e.inventory?.name||"Unknown Item"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Requested by: ",e.dentists?.name||e.staff?.name||"Unknown"]})]}),(0,t.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${"pending"===e.status?"bg-yellow-100 text-yellow-700":"approved"===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),(0,t.jsxs)("p",{className:"text-sm text-foreground mb-2",children:["Quantity: ",e.quantity]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mb-3",children:["Date: ",e.requested_date?new Date(e.requested_date).toLocaleDateString():"-"]}),"pending"===e.status&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(l.Button,{size:"sm",onClick:()=>P(e.id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white text-xs",children:"Approve"}),(0,t.jsx)(l.Button,{size:"sm",onClick:()=>U(e.id),variant:"outline",className:"flex-1 text-xs text-destructive hover:bg-destructive/10",children:"Reject"})]})]},e.id))})})]})]}),A&&(0,t.jsx)(C,{onClose:()=>T(!1),onSubmit:B})]})}e.s(["default",()=>w],26548)}]);