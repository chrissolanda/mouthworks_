{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Downloads/im_mouthworks/im_mouthworks/im_mouthworks/lib/supabase-client.ts"],"sourcesContent":["import { createBrowserClient } from \"@supabase/ssr\"\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || \"https://xpybqjfofdmkeiijvwnx.supabase.co\"\r\nconst supabaseAnonKey =\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY ||\r\n  \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhweWJxamZvZmRta2VpaWp2d254Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ1MDEyODAsImV4cCI6MjA4MDA3NzI4MH0.Dww9fKSwqzINDt18uhgcQJbeq4rnH3AEedEiteHZ-FQ\"\r\n\r\nlet supabaseClient: ReturnType<typeof createBrowserClient> | null = null\r\n\r\nexport function getSupabaseClient() {\r\n  if (!supabaseClient) {\r\n    supabaseClient = createBrowserClient(supabaseUrl, supabaseAnonKey)\r\n  }\r\n  return supabaseClient\r\n}\r\n"],"names":[],"mappings":";;;;AAEoB;AAFpB;AAAA;;AAEA,MAAM,cAAc,gFAAwC;AAC5D,MAAM,kBACJ,wPACA;AAEF,IAAI,iBAAgE;AAE7D,SAAS;IACd,IAAI,CAAC,gBAAgB;QACnB,iBAAiB,IAAA,oMAAmB,EAAC,aAAa;IACpD;IACA,OAAO;AACT"}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Downloads/im_mouthworks/im_mouthworks/im_mouthworks/lib/auth-context.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\nimport { createContext, useContext, useState, useEffect } from \"react\"\r\nimport { getSupabaseClient } from \"./supabase-client\"\r\n\r\nexport type UserRole = \"patient\" | \"dentist\" | \"hr\"\r\n\r\nexport interface User {\r\n  id: string\r\n  email: string\r\n  name: string\r\n  role: UserRole\r\n  phone?: string\r\n  specialization?: string\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null\r\n  loading: boolean\r\n  login: (email: string, password: string) => Promise<void>\r\n  patientAutoApproved?: boolean\r\n  register: (email: string, password: string, name: string, phone?: string) => Promise<any>\r\n  logout: () => void\r\n  isAuthenticated: boolean\r\n  showPatientRegistration: boolean\r\n  savePatientProfile: (name: string, phone?: string) => Promise<void>\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [showPatientRegistration, setShowPatientRegistration] = useState(false)\r\n  const [patientAutoApproved, setPatientAutoApproved] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const initializeAuth = async () => {\r\n      try {\r\n        const supabase = getSupabaseClient()\r\n        const {\r\n          data: { user: authUser },\r\n          error,\r\n        } = await supabase.auth.getUser()\r\n\r\n        if (authUser && !error) {\r\n          const emailStr = authUser.email || \"\"\r\n          const roleFromMeta = authUser.user_metadata?.role || \"patient\"\r\n          const isGmail = emailStr.toLowerCase().endsWith(\"@gmail.com\")\r\n          setUser({\r\n            id: authUser.id,\r\n            email: emailStr,\r\n            name: authUser.user_metadata?.name || emailStr || \"\",\r\n            role: roleFromMeta,\r\n            phone: authUser.user_metadata?.phone,\r\n            specialization: authUser.user_metadata?.specialization,\r\n          })\r\n          // For Gmail patients, do not show registration modal; mark as auto-approved\r\n          if (roleFromMeta === \"patient\" && isGmail) {\r\n            setShowPatientRegistration(false)\r\n            setPatientAutoApproved(true)\r\n            // Ensure a patient row exists for Gmail users so booking and payments work\r\n            try {\r\n              const { patientService } = await import(\"./db-service\")\r\n              const existingPatient = await patientService.getByEmail(emailStr)\r\n              if (!existingPatient) {\r\n                await patientService.create({\r\n                  name: authUser.user_metadata?.name || emailStr,\r\n                  email: emailStr,\r\n                  phone: authUser.user_metadata?.phone || null,\r\n                  dob: null,\r\n                  gender: null,\r\n                  address: null,\r\n                })\r\n              }\r\n            } catch (err) {\r\n              console.warn(\"[v0] Could not auto-create patient record for Gmail user:\", err)\r\n            }\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"[v0] Auth initialization error:\", error)\r\n      }\r\n      setLoading(false)\r\n    }\r\n\r\n    initializeAuth()\r\n  }, [])\r\n\r\n  const login = async (email: string, password: string) => {\r\n    // First try to authenticate against the `auth_users` table (registered users)\r\n    try {\r\n      const supabase = getSupabaseClient()\r\n      const { data: authUser, error } = await supabase.from(\"auth_users\").select(\"*\").eq(\"email\", email).maybeSingle()\r\n      if (error) {\r\n        console.warn(\"[v0] Supabase error checking auth_users:\", error)\r\n      }\r\n      if (authUser) {\r\n        // simple password check (password_hash stores the password in this demo app)\r\n        if (authUser.password_hash === password) {\r\n          const userObj: User = {\r\n            id: authUser.id,\r\n            email: authUser.email,\r\n            name: authUser.name || authUser.email,\r\n            role: authUser.role as UserRole,\r\n            phone: authUser.phone || undefined,\r\n            specialization: authUser.specialization || undefined,\r\n          }\r\n          setUser(userObj)\r\n          localStorage.setItem(\"user\", JSON.stringify(userObj))\r\n          // If this is a patient and they don't have a patients row, prompt for profile\r\n          // but if they're signing in with Gmail, auto-approve and do not show modal\r\n          const isGmail = (userObj.email || \"\").toLowerCase().endsWith(\"@gmail.com\")\r\n          if (userObj.role === \"patient\") {\r\n            if (isGmail) {\r\n              setShowPatientRegistration(false)\r\n              setPatientAutoApproved(true)\r\n              // Ensure a patient row exists for Gmail logins\r\n              try {\r\n                const { patientService } = await import(\"./db-service\")\r\n                const existingPatient = await patientService.getByEmail(userObj.email)\r\n                if (!existingPatient) {\r\n                  await patientService.create({\r\n                    name: userObj.name || userObj.email,\r\n                    email: userObj.email,\r\n                    phone: userObj.phone || null,\r\n                    dob: null,\r\n                    gender: null,\r\n                    address: null,\r\n                  })\r\n                }\r\n              } catch (err) {\r\n                console.warn(\"[v0] Could not auto-create patient record after login:\", err)\r\n              }\r\n            } else {\r\n              setShowPatientRegistration(true)\r\n              setPatientAutoApproved(false)\r\n            }\r\n          }\r\n          return\r\n        } else {\r\n          throw new Error(\"Invalid credentials\")\r\n        }\r\n      }\r\n\r\n    } catch (err) {\r\n      console.warn(\"[v0] Error authenticating against auth_users:\", err)\r\n    }\r\n\r\n    // If no auth_users match, try Supabase Auth sign-in (for accounts created via Supabase)\r\n    try {\r\n      const supabase = getSupabaseClient()\r\n      const { data, error } = await supabase.auth.signInWithPassword({ email, password })\r\n      if (error) {\r\n        // Not authenticated via Supabase - proceed to mock users handling below\r\n        console.warn(\"[v0] Supabase auth signIn error:\", error)\r\n      } else if (data && data.user) {\r\n        const authUser = data.user\r\n        const roleFromMeta = (authUser.user_metadata as any)?.role || \"patient\"\r\n        const userObj: User = {\r\n          id: authUser.id,\r\n          email: authUser.email || email,\r\n          name: (authUser.user_metadata as any)?.name || authUser.email || email,\r\n          role: roleFromMeta as UserRole,\r\n          phone: (authUser.user_metadata as any)?.phone || undefined,\r\n          specialization: (authUser.user_metadata as any)?.specialization || undefined,\r\n        }\r\n        setUser(userObj)\r\n        localStorage.setItem(\"user\", JSON.stringify(userObj))\r\n\r\n        // For patient users, handle registration modal and auto-approval\r\n        if (userObj.role === \"patient\") {\r\n          // Gmail patients auto-approve\r\n          const isGmail = (userObj.email || \"\").toLowerCase().endsWith(\"@gmail.com\")\r\n          if (isGmail) {\r\n            setShowPatientRegistration(false)\r\n            setPatientAutoApproved(true)\r\n          } else {\r\n            // Non-Gmail patients created via Supabase Auth: don't show registration modal\r\n            // (they already have an auth account), just set auto-approved\r\n            setShowPatientRegistration(false)\r\n            setPatientAutoApproved(true)\r\n          }\r\n          \r\n          // Ensure patient record exists in database\r\n          try {\r\n            const { patientService } = await import(\"./db-service\")\r\n            const existingPatient = await patientService.getByEmail(userObj.email)\r\n            if (!existingPatient) {\r\n              await patientService.create({\r\n                name: userObj.name || userObj.email,\r\n                email: userObj.email,\r\n                phone: userObj.phone || null,\r\n                dob: null,\r\n                gender: null,\r\n                address: null,\r\n              })\r\n            }\r\n          } catch (err) {\r\n            console.warn(\"[v0] Could not auto-create patient record after supabase login:\", err)\r\n          }\r\n        }\r\n\r\n        return\r\n      }\r\n    } catch (err) {\r\n      console.warn(\"[v0] Error authenticating via Supabase auth:\", err)\r\n    }\r\n\r\n    throw new Error(\"Invalid credentials\")\r\n  }\r\n\r\n  const register = async (email: string, password: string, name: string, phone?: string) => {\r\n    try {\r\n      const response = await fetch(\"/api/auth/register\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ email, password, name, phone }),\r\n      })\r\n\r\n      const data = await response.json()\r\n\r\n      if (!response.ok) {\r\n        if (response.status === 409 && data.status === \"exists\") {\r\n          return { status: \"exists\", user: data.user }\r\n        }\r\n        throw new Error(data.error || \"Registration failed\")\r\n      }\r\n\r\n      const userObj: User = {\r\n        id: data.user.id,\r\n        email: data.user.email,\r\n        name: data.user.name,\r\n        role: \"patient\",\r\n        phone: data.user.phone || phone || undefined,\r\n      }\r\n      setUser(userObj)\r\n      localStorage.setItem(\"user\", JSON.stringify(userObj))\r\n      setShowPatientRegistration(false)\r\n      return { status: \"created\", user: userObj }\r\n    } catch (err) {\r\n      const errorMsg = err instanceof Error ? err.message : String(err)\r\n      console.error(\"[v0] Registration error:\", errorMsg)\r\n      throw err\r\n    }\r\n  }\r\n\r\n  const logout = () => {\r\n    setUser(null)\r\n    localStorage.removeItem(\"user\")\r\n    const supabase = getSupabaseClient()\r\n    supabase.auth.signOut()\r\n  }\r\n\r\n  const savePatientProfile = async (name: string, phone?: string) => {\r\n    try {\r\n      if (!user || user.role !== \"patient\") {\r\n        throw new Error(\"Only patients can register\")\r\n      }\r\n\r\n      // Import patientService dynamically to avoid circular imports\r\n      const { patientService } = await import(\"./db-service\")\r\n\r\n      // Check for duplicate patient name\r\n      const existingPatient = await patientService.getByName(name)\r\n      if (existingPatient) {\r\n        throw new Error(`Patient with name '${name}' already exists. Please use a different name.`)\r\n      }\r\n\r\n      // Create patient record in database\r\n      const newPatient = await patientService.create({\r\n        name: name,\r\n        email: user.email,\r\n        phone: phone || null,\r\n        dob: null,\r\n        gender: null,\r\n        address: null,\r\n      })\r\n\r\n      // Ensure an auth_users row exists for this email\r\n      try {\r\n        const supabase = getSupabaseClient()\r\n        const { data: existingAuthUser, error: authErr } = await supabase.from(\"auth_users\").select(\"*\").eq(\"email\", user.email).maybeSingle()\r\n        if (authErr) {\r\n          console.warn(\"[v0] Warning checking auth_users:\", authErr)\r\n        }\r\n        if (!existingAuthUser) {\r\n          const { error: insertErr } = await supabase.from(\"auth_users\").insert([\r\n            {\r\n              email: user.email,\r\n              name: name,\r\n              role: \"patient\",\r\n              phone: phone || null,\r\n            },\r\n          ])\r\n          if (insertErr) {\r\n            console.warn(\"[v0] Warning inserting auth_users record:\", insertErr)\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.warn(\"[v0] Warning ensuring auth_users record:\", err)\r\n      }\r\n\r\n      if (newPatient) {\r\n        // Update user state with the new patient info\r\n        const updatedUser = { ...user, name: name, phone: phone }\r\n        setUser(updatedUser)\r\n        localStorage.setItem(\"user\", JSON.stringify(updatedUser))\r\n        setShowPatientRegistration(false)\r\n      }\r\n    } catch (error) {\r\n      const errorMsg = error instanceof Error ? error.message : String(error)\r\n      console.error(\"[v0] Error saving patient profile:\", errorMsg)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        user,\r\n        loading,\r\n        login,\r\n        register,\r\n        logout,\r\n        isAuthenticated: !!user,\r\n        // Disable patient registration modal flow\r\n        showPatientRegistration: false,\r\n        savePatientProfile: async () => {},\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  )\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext)\r\n  if (context === undefined) {\r\n    throw new Error(\"useAuth must be used within AuthProvider\")\r\n  }\r\n  return context\r\n}\r\n"],"names":[],"mappings":"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"}}]
}