module.exports=[90166,a=>{"use strict";let b=(0,a.i(70106).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);a.s(["DollarSign",()=>b],90166)},92e3,a=>{"use strict";let b=(0,a.i(70106).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},39761,a=>{"use strict";let b=(0,a.i(70106).default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);a.s(["BarChart3",()=>b],39761)},5522,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},87532,a=>{"use strict";let b=(0,a.i(70106).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>b],87532)},16201,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},41710,a=>{"use strict";let b=(0,a.i(70106).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],41710)},6498,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(21937),e=a.i(96313),f=a.i(3130),g=a.i(40695),h=a.i(5522),i=a.i(30617),j=a.i(41675),k=a.i(34422),l=a.i(39761),m=a.i(90166),n=a.i(87532),o=a.i(16201),p=a.i(92e3),q=a.i(41710),r=a.i(2288),s=a.i(97895);function t(){let{user:a}=(0,d.useAuth)(),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)("all"),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)({totalEarned:0,totalPending:0,totalCompleted:0,count:0}),[D,E]=(0,c.useState)(null);(0,c.useEffect)(()=>{let b=null;return(async()=>{if(!a?.id&&!a?.email)return;let c=await r.dentistService.getAll(),d=(c||[]).find(b=>b.user_id===a?.id),e=(c||[]).find(b=>(b.email||"").toLowerCase()===(a?.email||"").toLowerCase()),f=d||e;f?.id&&(E(f.id),await F(f.id),b=setInterval(()=>F(f.id),3e3))})(),()=>{b&&clearInterval(b)}},[a?.id,a?.email]);let F=async a=>{try{var b;let c,d,e;w(!0);let f=a??D,g="string"==typeof f?f:null;if(!g){console.warn("[v0] Dentist table ID not resolved; skipping payments fetch"),u([]),C({totalEarned:0,totalPending:0,totalCompleted:0,count:0});return}if(!/^[0-9a-fA-F-]{36}$/.test(g)){console.error("[v0] Dentist ID is not a valid UUID, aborting payments fetch:",g),u([]),C({totalEarned:0,totalPending:0,totalCompleted:0,count:0});return}console.log("[v0] Loading payments for dentist:",g);let h=await r.paymentService.getByDentistId(g),i=(b=h||[],c=0,d=0,e=0,b.forEach(a=>{"paid"===a.status||"partial"===a.status?(c+=a.amount,e+=1):"unpaid"===a.status&&(d+=a.amount)}),{totalEarned:c,totalPending:d,totalCompleted:e,count:b.length});console.log("[v0] Payments loaded:",h?.length||0),console.log("[v0] Earnings data:",i),u(h||[]),C(i||{totalEarned:0,totalPending:0,totalCompleted:0,count:0})}catch(b){console.error("[v0] Error loading earnings:",b instanceof Error?b.message:b),console.error("[v0] Dentist ID used:",a??D),u([]),C({totalEarned:0,totalPending:0,totalCompleted:0,count:0})}finally{w(!1)}},G=[{label:"Dashboard",icon:(0,b.jsx)(i.LayoutDashboard,{className:"w-5 h-5"}),href:"/dentist/dashboard"},{label:"My Schedule",icon:(0,b.jsx)(j.Calendar,{className:"w-5 h-5"}),href:"/dentist/schedule"},{label:"Treatments",icon:(0,b.jsx)(k.Bluetooth,{className:"w-5 h-5"}),href:"/dentist/treatments"},{label:"Earnings",icon:(0,b.jsx)(m.DollarSign,{className:"w-5 h-5"}),href:"/dentist/earnings"},{label:"Reports",icon:(0,b.jsx)(l.BarChart3,{className:"w-5 h-5"}),href:"/dentist/reports"}],H=t.filter(a=>{let b="all"===x||a.status===x,c=(a.patients?.name||"").toLowerCase(),d=(a.description||"").toLowerCase(),e=c.includes(z.toLowerCase())||d.includes(z.toLowerCase());return b&&e});return(0,b.jsx)(e.default,{navItems:G,title:"My Earnings",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Earnings & Transactions"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Track your payments and commission"})]}),(0,b.jsx)(g.Button,{onClick:F,variant:"outline",size:"sm",children:"ðŸ”„ Refresh"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)(f.Card,{className:"hover:shadow-md transition-shadow border-l-4 border-l-green-600",children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsxs)(f.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(o.CheckCircle,{className:"w-4 h-4 text-green-600"}),"Total Earned"]})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-green-600",children:(0,s.formatCurrency)(B.totalEarned)}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[B.totalCompleted," completed"]})]})]}),(0,b.jsxs)(f.Card,{className:"hover:shadow-md transition-shadow border-l-4 border-l-yellow-600",children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsxs)(f.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(q.Clock,{className:"w-4 h-4 text-yellow-600"}),"Pending Payment"]})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-yellow-600",children:(0,s.formatCurrency)(B.totalPending)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Awaiting confirmation"})]})]}),(0,b.jsxs)(f.Card,{className:"hover:shadow-md transition-shadow border-l-4 border-l-primary",children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total Transactions"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-primary",children:B.count}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"All payments"})]})]}),(0,b.jsxs)(f.Card,{className:"hover:shadow-md transition-shadow border-l-4 border-l-blue-600",children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Net Balance"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:(0,s.formatCurrency)(.5*B.totalEarned)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Dentist share (50% of total earned)"})]})]})]}),(0,b.jsx)(f.Card,{children:(0,b.jsxs)(f.CardContent,{className:"pt-6 space-y-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground"}),(0,b.jsx)(h.Input,{type:"text",placeholder:"Search by patient name or description...",value:z,onChange:a=>A(a.target.value),className:"pl-10 border-border"})]}),(0,b.jsx)("div",{className:"flex gap-2",children:["all","paid","partial","unpaid"].map(a=>(0,b.jsx)("button",{onClick:()=>y(a),className:`px-4 py-2 rounded-lg font-medium transition-colors text-sm ${x===a?"bg-primary text-primary-foreground":"bg-muted text-foreground hover:bg-muted/80"}`,children:a.charAt(0).toUpperCase()+a.slice(1)},a))})]})}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Transaction History"}),(0,b.jsxs)(f.CardDescription,{children:[H.length," transaction(s)"]})]}),(0,b.jsx)(f.CardContent,{children:v?(0,b.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"Loading transactions..."}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-border",children:[(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Date"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Patient"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Service"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Amount"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Method"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Appointment Status"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Payment Status"})]})}),(0,b.jsx)("tbody",{children:0===H.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"No transactions found"})}):H.map(a=>(0,b.jsxs)("tr",{className:"border-b border-border hover:bg-muted/50 transition-colors",children:[(0,b.jsx)("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:a.date?new Date(a.date).toLocaleDateString():"-"}),(0,b.jsx)("td",{className:"py-3 px-4 text-sm font-medium text-foreground",children:a.patients?.name||"Unknown"}),(0,b.jsx)("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:a.description||"-"}),(0,b.jsx)("td",{className:"py-3 px-4 text-sm font-semibold text-foreground",children:(0,s.formatCurrency)(a.amount)}),(0,b.jsx)("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:a.method||"-"}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsx)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${a.appointments?.status==="completed"?"bg-green-100 text-green-700":a.appointments?.status==="confirmed"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:a.appointments?.status?a.appointments.status.charAt(0).toUpperCase()+a.appointments.status.slice(1):"Pending"})}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${"paid"===a.status?"bg-green-100 text-green-700":"partial"===a.status?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:["paid"===a.status?(0,b.jsx)(o.CheckCircle,{className:"w-3 h-3"}):(0,b.jsx)(p.AlertCircle,{className:"w-3 h-3"}),a.status.charAt(0).toUpperCase()+a.status.slice(1)]})})]},a.id))})]})})})]})]})})}a.s(["default",()=>t])}];

//# sourceMappingURL=_23052098._.js.map