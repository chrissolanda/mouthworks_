module.exports=[57240,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(21937),e=a.i(96313),f=a.i(3130),g=a.i(40695),h=a.i(5522),i=a.i(30617),j=a.i(60246),k=a.i(41675),l=a.i(34422),m=a.i(11156),n=a.i(83497),o=a.i(39761),p=a.i(21161),q=a.i(15618),r=a.i(24569),s=a.i(81560),t=a.i(77156),u=a.i(87532),v=a.i(2288),w=a.i(19736);let x={async signUp(a,b,c,d){let e=(0,w.getSupabaseClient)(),{data:f,error:g}=await e.auth.signUp({email:a,password:b,options:{data:{name:c,role:d}}});if(g)throw g;return f},async signIn(a,b){let c=(0,w.getSupabaseClient)(),{data:d,error:e}=await c.auth.signInWithPassword({email:a,password:b});if(e)throw e;return d},async signOut(){let a=(0,w.getSupabaseClient)(),{error:b}=await a.auth.signOut();if(b)throw b},async getCurrentUser(){let a=(0,w.getSupabaseClient)(),{data:{user:b},error:c}=await a.auth.getUser();if(c)throw c;return b},async getSession(){let a=(0,w.getSupabaseClient)(),{data:{session:b},error:c}=await a.auth.getSession();if(c)throw c;return b},async updatePassword(a,b){let c=(0,w.getSupabaseClient)();try{let d=await fetch("/api/auth/update-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:b})});if(!d.ok){let b=null;try{b=await d.json()}catch(a){}let e=b?.message||null;if(e&&e.toLowerCase().includes("server not configured")){let{data:b,error:d}=await c.auth.resetPasswordForEmail(a);if(d)throw d;return b}throw Error(e||"Failed to update password")}return await d.json()}catch(a){throw a}}};var y=a.i(33508),z=a.i(70106);let A=(0,z.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var B=a.i(34157),B=B;function C({onClose:a,onSubmit:d}){let[e,f]=(0,c.useState)({name:"",email:"",phone:"",dob:"",gender:"Male",address:""}),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!1),s=a=>{let{name:b,value:c}=a.target;f(a=>({...a,[b]:c}))},t=async b=>{if(b.preventDefault(),j(null),!e.name||!e.email||!e.phone)return void j("Please fill in all required fields");l(!0);try{let b=null;if(m){b=(()=>{let a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%",b="";for(let c=0;c<12;c++)b+=a.charAt(Math.floor(Math.random()*a.length));return b})(),p(b);try{await x.signUp(e.email,b,e.name,"patient")}catch(a){if(!(a instanceof Error?a.message:String(a)).toLowerCase().includes("already"))throw a}}await d(e),f({name:"",email:"",phone:"",dob:"",gender:"Male",address:""}),b||a()}catch(a){j(a instanceof Error?a.message:"Failed to add patient"),console.error("Add patient error:",a),p(null)}finally{l(!1)}};return o?(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-card rounded-lg shadow-2xl max-w-md w-full",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Patient Account Created"}),(0,b.jsx)("button",{onClick:a,className:"p-1 hover:bg-muted rounded-lg transition-colors",children:(0,b.jsx)(y.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[(0,b.jsx)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:(0,b.jsx)("p",{className:"text-sm text-green-700 dark:text-green-400 font-medium",children:"âœ“ Patient and login account created successfully"})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Email"}),(0,b.jsx)("div",{className:"p-3 bg-muted rounded-lg text-sm text-foreground font-mono",children:e.email})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Temporary Password"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("div",{className:"flex-1 p-3 bg-muted rounded-lg text-sm text-foreground font-mono break-all",children:o}),(0,b.jsx)(g.Button,{type:"button",size:"sm",variant:"outline",onClick:()=>{o&&(navigator.clipboard.writeText(o),r(!0),setTimeout(()=>r(!1),2e3))},className:"flex-shrink-0",children:q?(0,b.jsx)(B.default,{className:"w-4 h-4"}):(0,b.jsx)(A,{className:"w-4 h-4"})})]})]}),(0,b.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3 text-sm text-blue-700 dark:text-blue-400",children:[(0,b.jsx)("strong",{children:"Note:"})," Share this password with the patient. They should change it on first login."]}),(0,b.jsx)(g.Button,{onClick:a,className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",children:"Done"})]})]})}):(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-card rounded-lg shadow-2xl max-w-md w-full",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Add New Patient"}),(0,b.jsx)("button",{onClick:a,className:"p-1 hover:bg-muted rounded-lg transition-colors",children:(0,b.jsx)(y.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("form",{onSubmit:t,className:"p-6 space-y-4",children:[i&&(0,b.jsx)("div",{className:"p-3 bg-destructive/10 text-destructive rounded-lg text-sm",children:i}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Full Name"}),(0,b.jsx)(h.Input,{name:"name",value:e.name,onChange:s,placeholder:"John Doe",className:"border-border",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Email"}),(0,b.jsx)(h.Input,{name:"email",type:"email",value:e.email,onChange:s,placeholder:"john@example.com",className:"border-border",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Phone"}),(0,b.jsx)(h.Input,{name:"phone",value:e.phone,onChange:s,placeholder:"+1 234-567-8900",className:"border-border",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Date of Birth"}),(0,b.jsx)(h.Input,{name:"dob",type:"date",value:e.dob,onChange:s,className:"border-border"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Gender"}),(0,b.jsxs)("select",{name:"gender",value:e.gender,onChange:s,className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground",children:[(0,b.jsx)("option",{children:"Male"}),(0,b.jsx)("option",{children:"Female"}),(0,b.jsx)("option",{children:"Other"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Address"}),(0,b.jsx)(h.Input,{name:"address",value:e.address,onChange:s,placeholder:"123 Main St, City, State",className:"border-border"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 py-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"createAuth",checked:m,onChange:a=>n(a.target.checked),className:"rounded border-border"}),(0,b.jsx)("label",{htmlFor:"createAuth",className:"text-sm text-foreground cursor-pointer",children:"Create login account (auto-generate password)"})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,b.jsx)(g.Button,{type:"button",onClick:a,variant:"outline",className:"flex-1 bg-transparent",children:"Cancel"}),(0,b.jsx)(g.Button,{type:"submit",disabled:k,className:"flex-1 bg-primary hover:bg-primary/90 text-primary-foreground",children:k?"Adding...":"Add Patient"})]})]})]})})}let D=(0,z.default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),E=(0,z.default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);function F({patient:a,onClose:c}){return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-card rounded-lg shadow-2xl max-w-md w-full max-h-96 overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border sticky top-0 bg-card",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Patient Details"}),(0,b.jsx)("button",{onClick:c,className:"p-1 hover:bg-muted rounded-lg transition-colors",children:(0,b.jsx)(y.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("div",{className:"w-16 h-16 rounded-full bg-primary/20 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-2xl font-bold text-primary",children:a.name.charAt(0)})})}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Name"}),(0,b.jsx)("p",{className:"text-foreground font-semibold",children:a.name})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(E,{className:"w-4 h-4 text-primary"}),(0,b.jsx)("a",{href:`mailto:${a.email}`,className:"text-primary hover:underline text-sm",children:a.email})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(D,{className:"w-4 h-4 text-primary"}),(0,b.jsx)("a",{href:`tel:${a.phone}`,className:"text-primary hover:underline text-sm",children:a.phone})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Date of Birth"}),(0,b.jsx)("p",{className:"text-foreground",children:a.dob})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Gender"}),(0,b.jsx)("p",{className:"text-foreground",children:a.gender})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Address"}),(0,b.jsx)("p",{className:"text-foreground text-sm",children:a.address})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Patient Since"}),(0,b.jsx)("p",{className:"text-foreground",children:a.createdAt})]})]}),(0,b.jsx)(g.Button,{onClick:c,className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground mt-4",children:"Close"})]})]})})}let G=(0,z.default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function H({patient:a,onClose:d,onSubmit:e}){let[f,i]=(0,c.useState)({name:a.name||"",email:a.email||"",phone:a.phone||"",dob:a.dob||"",gender:a.gender||"",address:a.address||""}),[j,k]=(0,c.useState)({newPassword:"",confirmPassword:""}),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(""),[u,v]=(0,c.useState)("profile"),w=a=>{let{name:b,value:c}=a.target;i(a=>({...a,[b]:c})),q("")},x=a=>{let{name:b,value:c}=a.target;k(a=>({...a,[b]:c})),q("")},z=async a=>{a.preventDefault(),o(!0),q(""),s("");try{if(!f.name||!f.email)throw Error("Name and email are required");await e({type:"profile",data:f}),s("Profile updated successfully"),setTimeout(d,1500)}catch(a){q(a instanceof Error?a.message:"Failed to update profile")}finally{o(!1)}},A=async b=>{b.preventDefault(),o(!0),q(""),s("");try{if(!j.newPassword)throw Error("Please enter a new password");if(j.newPassword.length<6)throw Error("Password must be at least 6 characters");if(j.newPassword!==j.confirmPassword)throw Error("Passwords do not match");await e({type:"password",data:{email:a.email,newPassword:j.newPassword}}),s("Password updated successfully"),k({newPassword:"",confirmPassword:""}),setTimeout(d,1500)}catch(a){q(a instanceof Error?a.message:"Failed to update password")}finally{o(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-card rounded-lg shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border sticky top-0 bg-card",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Edit Patient"}),(0,b.jsx)("button",{onClick:d,className:"p-1 hover:bg-muted rounded-lg transition-colors",children:(0,b.jsx)(y.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"flex border-b border-border px-6 pt-4",children:[(0,b.jsx)("button",{onClick:()=>v("profile"),className:`px-4 py-2 font-medium transition-colors ${"profile"===u?"text-primary border-b-2 border-primary":"text-muted-foreground"}`,children:"Profile"}),(0,b.jsx)("button",{onClick:()=>v("password"),className:`px-4 py-2 font-medium transition-colors ${"password"===u?"text-primary border-b-2 border-primary":"text-muted-foreground"}`,children:"Password"})]}),(0,b.jsxs)("div",{className:"p-6",children:[p&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-destructive/10 border border-destructive/30 rounded-lg text-destructive text-sm",children:p}),r&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-green-500/10 border border-green-500/30 rounded-lg text-green-600 text-sm",children:r}),"profile"===u&&(0,b.jsxs)("form",{onSubmit:z,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Name *"}),(0,b.jsx)(h.Input,{type:"text",name:"name",value:f.name,onChange:w,placeholder:"Patient name",className:"border-border"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Email *"}),(0,b.jsx)(h.Input,{type:"email",name:"email",value:f.email,onChange:w,placeholder:"Email address",className:"border-border"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Phone"}),(0,b.jsx)(h.Input,{type:"tel",name:"phone",value:f.phone,onChange:w,placeholder:"Phone number",className:"border-border"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Date of Birth"}),(0,b.jsx)(h.Input,{type:"date",name:"dob",value:f.dob,onChange:w,className:"border-border"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Gender"}),(0,b.jsxs)("select",{name:"gender",value:f.gender,onChange:w,className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,b.jsx)("option",{value:"",children:"Select gender"}),(0,b.jsx)("option",{value:"Male",children:"Male"}),(0,b.jsx)("option",{value:"Female",children:"Female"}),(0,b.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Address"}),(0,b.jsx)(h.Input,{type:"text",name:"address",value:f.address,onChange:w,placeholder:"Street address",className:"border-border"})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)(g.Button,{onClick:d,variant:"outline",className:"flex-1",children:"Cancel"}),(0,b.jsx)(g.Button,{type:"submit",className:"flex-1 bg-primary hover:bg-primary/90 text-primary-foreground",disabled:n,children:n?"Saving...":"Save Changes"})]})]}),"password"===u&&(0,b.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"New Password *"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(h.Input,{type:l?"text":"password",name:"newPassword",value:j.newPassword,onChange:x,placeholder:"Enter new password",className:"border-border pr-10"}),(0,b.jsx)("button",{type:"button",onClick:()=>m(!l),className:"absolute right-3 top-2.5 text-muted-foreground hover:text-foreground",children:l?(0,b.jsx)(G,{className:"w-4 h-4"}):(0,b.jsx)(t.Eye,{className:"w-4 h-4"})})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum 6 characters"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Confirm Password *"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(h.Input,{type:l?"text":"password",name:"confirmPassword",value:j.confirmPassword,onChange:x,placeholder:"Confirm new password",className:"border-border pr-10"}),(0,b.jsx)("button",{type:"button",onClick:()=>m(!l),className:"absolute right-3 top-2.5 text-muted-foreground hover:text-foreground",children:l?(0,b.jsx)(G,{className:"w-4 h-4"}):(0,b.jsx)(t.Eye,{className:"w-4 h-4"})})]})]}),(0,b.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3 text-sm text-blue-700 dark:text-blue-400",children:[(0,b.jsx)("strong",{children:"Note:"})," The patient will need to use the new password to log in after this change."]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)(g.Button,{onClick:d,variant:"outline",className:"flex-1",children:"Cancel"}),(0,b.jsx)(g.Button,{type:"submit",className:"flex-1 bg-primary hover:bg-primary/90 text-primary-foreground",disabled:n,children:n?"Updating...":"Update Password"})]})]})]})]})})}function I(){let{user:a}=(0,d.useAuth)(),[w,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(!0),[B,D]=(0,c.useState)(!1),[E,G]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)("");(0,c.useEffect)(()=>{O()},[]);let O=async()=>{try{A(!0);let a=await v.patientService.getAll();y(a||[])}catch(a){console.error("[v0] Error loading patients:",a)}finally{A(!1)}},P=[{label:"Dashboard",icon:(0,b.jsx)(i.LayoutDashboard,{className:"w-5 h-5"}),href:"/hr/dashboard"},{label:"Patients",icon:(0,b.jsx)(j.Users,{className:"w-5 h-5"}),href:"/hr/patients"},{label:"Appointments",icon:(0,b.jsx)(k.Calendar,{className:"w-5 h-5"}),href:"/hr/appointments"},{label:"Treatments",icon:(0,b.jsx)(l.Bluetooth,{className:"w-5 h-5"}),href:"/hr/treatments"},{label:"Payments",icon:(0,b.jsx)(m.CreditCard,{className:"w-5 h-5"}),href:"/hr/payments"},{label:"Inventory",icon:(0,b.jsx)(n.Package,{className:"w-5 h-5"}),href:"/hr/inventory"},{label:"Reports",icon:(0,b.jsx)(o.BarChart3,{className:"w-5 h-5"}),href:"/hr/reports"},{label:"Settings",icon:(0,b.jsx)(p.Settings,{className:"w-5 h-5"}),href:"/hr/settings"}],Q=async a=>{try{if(await v.patientService.getByName(a.name))throw Error(`Patient with name '${a.name}' already exists. Please use a different name.`);let b=await v.patientService.create(a);b&&(y([b,...w]),D(!1))}catch(a){console.error("[v0] Error adding patient:",a),alert(`Error adding patient: ${a instanceof Error?a.message:"Unknown error"}`)}},R=async a=>{if(confirm("Are you sure you want to delete this patient?"))try{await v.patientService.delete(a),y(w.filter(b=>b.id!==a))}catch(a){console.error("[v0] Error deleting patient:",a)}},S=async a=>{try{"profile"===a.type?(await v.patientService.update(K.id,a.data),y(w.map(b=>b.id===K.id?{...b,...a.data}:b))):"password"===a.type&&await x.updatePassword(a.data.email,a.data.newPassword)}catch(a){throw console.error("[v0] Error updating patient:",a),a}},T=w.filter(a=>a.name.toLowerCase().includes(M.toLowerCase())||a.email.toLowerCase().includes(M.toLowerCase())||a.phone&&a.phone.includes(M));return(0,b.jsxs)(e.default,{navItems:P,title:"Patient Management",children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Manage Patients"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Add, edit, and manage patient records"})]}),(0,b.jsxs)(g.Button,{onClick:()=>D(!0),className:"bg-primary hover:bg-primary/90 text-primary-foreground gap-2",children:[(0,b.jsx)(q.Plus,{className:"w-4 h-4"}),"Add Patient"]})]}),(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(u.Search,{className:"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground"}),(0,b.jsx)(h.Input,{type:"text",placeholder:"Search by name, email, or phone...",value:M,onChange:a=>N(a.target.value),className:"pl-10 border-border"})]})})}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Patient Records"}),(0,b.jsxs)(f.CardDescription,{children:[T.length," patient(s) found"]})]}),(0,b.jsx)(f.CardContent,{children:z?(0,b.jsx)("div",{className:"py-8 text-center text-muted-foreground",children:"Loading patients..."}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-border",children:[(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Name"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Email"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Phone"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"DOB"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Gender"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Joined"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:0===T.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"py-8 text-center text-muted-foreground",children:"No patients found"})}):T.map(a=>(0,b.jsxs)("tr",{className:"border-b border-border hover:bg-muted/50 transition-colors",children:[(0,b.jsx)("td",{className:"py-3 px-4 text-sm font-medium text-foreground",children:a.name}),(0,b.jsx)("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:a.email}),(0,b.jsx)("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:a.phone||"-"}),(0,b.jsx)("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:a.dob||"-"}),(0,b.jsx)("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:a.gender||"-"}),(0,b.jsx)("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:a.created_at?new Date(a.created_at).toLocaleDateString():"-"}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>{L(a),G(!0)},className:"p-1.5 hover:bg-muted rounded-lg transition-colors text-primary",children:(0,b.jsx)(t.Eye,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>{L(a),J(!0)},className:"p-1.5 hover:bg-muted rounded-lg transition-colors text-primary",children:(0,b.jsx)(r.Edit,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>R(a.id),className:"p-1.5 hover:bg-destructive/10 rounded-lg transition-colors text-destructive",children:(0,b.jsx)(s.Trash2,{className:"w-4 h-4"})})]})})]},a.id))})]})})})]})]}),B&&(0,b.jsx)(C,{onClose:()=>D(!1),onSubmit:Q}),E&&K&&(0,b.jsx)(F,{patient:K,onClose:()=>G(!1)}),I&&K&&(0,b.jsx)(H,{patient:K,onClose:()=>J(!1),onSubmit:S})]})}a.s(["default",()=>I],57240)}];

//# sourceMappingURL=app_hr_patients_page_tsx_5fd53d1a._.js.map