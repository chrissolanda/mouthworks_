{"version":3,"sources":["../../../../app/dentist/dashboard/page.tsx","../../../../components/modals/appointment-treatment-modal.tsx","../../../../components/modals/appointment-complete-modal.tsx"],"sourcesContent":["\"use client\"\n\nimport { useAuth } from \"@/lib/auth-context\"\nimport MainLayout from \"@/components/layout/main-layout\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { LayoutDashboard, Calendar, Bluetooth as Tooth, BarChart3, CheckCircle, XCircle, DollarSign } from \"lucide-react\"\nimport { useState, useEffect } from \"react\"\nimport { appointmentService, dentistService, paymentService, treatmentRecordService } from \"@/lib/db-service\"\nimport AppointmentTreatmentModal from \"@/components/modals/appointment-treatment-modal\"\nimport AppointmentCompleteModal from \"@/components/modals/appointment-complete-modal\"\n\ninterface Appointment {\n  id: string\n  patient_id: string\n  dentist_id: string\n  date: string\n  time: string\n  status: \"pending\" | \"confirmed\" | \"attended\" | \"in-progress\" | \"completed\" | \"paid\" | \"cancelled\" | \"rejected\"\n  treatment_id?: string\n  service?: string\n  treatment?: string\n  amount?: number\n  notes?: string\n  patients?: {\n    name: string\n    email: string\n  }\n  dentists?: {\n    name: string\n  }\n}\n\nexport default function DentistDashboard() {\n  const { user } = useAuth()\n  const [appointments, setAppointments] = useState<Appointment[]>([])\n  const [dentistTableId, setDentistTableId] = useState<string | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [processingId, setProcessingId] = useState<string | null>(null)\n  const [showCollectModal, setShowCollectModal] = useState(false)\n  const [showTreatmentModal, setShowTreatmentModal] = useState(false)\n  const [showCompleteModal, setShowCompleteModal] = useState(false)\n  const [selectedAppointment, setSelectedAppointment] = useState<Appointment | null>(null)\n  const [treatmentCount, setTreatmentCount] = useState(0)\n  const [stats, setStats] = useState({\n    appointments: 0,\n    completed: 0,\n    pending: 0,\n    earnings: 0,\n  })\n\n  useEffect(() => {\n    loadData()\n    // Auto-refresh every 3 seconds to show new payments\n    const interval = setInterval(() => {\n      loadData()\n    }, 3000)\n    return () => clearInterval(interval)\n  }, [user?.email])\n\n  const loadData = async () => {\n    if (!user?.email) return\n    try {\n      // Map auth user -> dentist table row (prefer user_id, fallback email)\n      const dentists = await dentistService.getAll()\n      const matchByUser = (dentists || []).find((d: any) => d.user_id === user.id)\n      const matchByEmail = (dentists || []).find(\n        (d: any) => (d.email || \"\").toLowerCase() === (user.email || \"\").toLowerCase(),\n      )\n      const match = matchByUser || matchByEmail\n      if (match?.id) {\n        setDentistTableId(match.id)\n        await loadAppointments(match.id)\n      } else {\n        setDentistTableId(null)\n        setAppointments([])\n      }\n    } catch (err) {\n      console.error(\"[v0] Error loading dentist record:\", err)\n      setAppointments([])\n    }\n  }\n\n  const loadAppointments = async (dentistId?: string) => {\n    const idToUse = dentistId || dentistTableId\n    if (!idToUse) return\n    try {\n      setLoading(true)\n      const data = await appointmentService.getByDentistId(idToUse)\n      setAppointments(data || [])\n      \n      // Calculate stats\n      const completed = (data || []).filter((a: any) => a.status === \"completed\").length\n      const pending = (data || []).filter((a: any) => a.status === \"pending\").length\n      \n      // Load earnings from payments\n      try {\n        const payments = await paymentService.getByDentistId(idToUse)\n        const totalEarnings = (payments || [])\n          .filter((p: any) => p.status === \"paid\" || p.status === \"partial\")\n          .reduce((sum: number, p: any) => sum + (p.amount || 0), 0)\n        \n        setStats({\n          appointments: (data || []).length,\n          completed,\n          pending,\n          earnings: totalEarnings,\n        })\n      } catch (err) {\n        console.log(\"[v0] Could not load earnings from payments (this is OK):\", err)\n        setStats({\n          appointments: (data || []).length,\n          completed,\n          pending,\n          earnings: 0,\n        })\n      }\n    } catch (error) {\n      console.error(\"[v0] Error loading appointments:\", error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleApproveAppointment = async (appointmentId: string) => {\n    setProcessingId(appointmentId)\n    try {\n      await appointmentService.changeStatus(appointmentId, \"confirmed\")\n      setAppointments((prev) => prev.map((apt) => (apt.id === appointmentId ? { ...apt, status: \"confirmed\" } : apt)))\n    } catch (error) {\n      console.error(\"[v0] Error approving appointment:\", error)\n      alert(\"Failed to approve appointment\")\n    } finally {\n      setProcessingId(null)\n    }\n  }\n\n  const handleRejectAppointment = async (appointmentId: string) => {\n    setProcessingId(appointmentId)\n    try {\n      await appointmentService.changeStatus(appointmentId, \"rejected\")\n      setAppointments((prev) => prev.map((apt) => (apt.id === appointmentId ? { ...apt, status: \"rejected\" } : apt)))\n    } catch (error) {\n      console.error(\"[v0] Error rejecting appointment:\", error)\n      alert(\"Failed to reject appointment\")\n    } finally {\n      setProcessingId(null)\n    }\n  }\n\n  const handleStartProcedure = async (appointment: Appointment) => {\n    setProcessingId(appointment.id)\n    try {\n      await appointmentService.changeStatus(appointment.id, \"in-progress\")\n      setAppointments((prev) => prev.map((apt) => (apt.id === appointment.id ? { ...apt, status: \"in-progress\" } : apt)))\n      \n      // Open treatment modal\n      setSelectedAppointment(appointment)\n      setShowTreatmentModal(true)\n    } catch (error) {\n      console.error(\"[v0] Error starting procedure:\", error)\n      alert(\"Failed to start procedure\")\n    } finally {\n      setProcessingId(null)\n    }\n  }\n\n  const handleSaveAndComplete = async (treatments: any[], totalAmount: number) => {\n    if (!selectedAppointment) {\n      console.error(\"[v0] No appointment selected\")\n      alert(\"Error: No appointment selected\")\n      return\n    }\n    \n    console.log(\"[v0] ðŸ”„ Starting handleSaveAndComplete...\")\n    console.log(\"[v0] Selected appointment:\", selectedAppointment)\n    console.log(\"[v0] Treatments to save:\", treatments)\n    console.log(\"[v0] Total amount:\", totalAmount)\n    \n    try {\n      // Save treatments to treatment_records\n      console.log(\"[v0] ðŸ’¾ Saving treatments to treatment_records...\")\n      for (let i = 0; i < treatments.length; i++) {\n        const treatment = treatments[i]\n        console.log(`[v0] Saving treatment ${i + 1}/${treatments.length}:`, treatment)\n        \n        const recordData = {\n          patient_id: selectedAppointment.patient_id,\n          dentist_id: selectedAppointment.dentist_id,\n          appointment_id: selectedAppointment.id,\n          treatment_id: treatment.treatment_id,\n          date: selectedAppointment.date,\n          quantity: treatment.quantity,\n          notes: `${treatment.name} - ${treatment.quantity}x`,\n        }\n        console.log(\"[v0] Record data:\", recordData)\n        \n        try {\n          const result = await treatmentRecordService.create(recordData)\n          console.log(`[v0] âœ… Treatment ${i + 1} saved successfully:`, result)\n        } catch (treatmentError) {\n          console.error(`[v0] âŒ Failed to save treatment ${i + 1}:`, treatmentError)\n          throw treatmentError\n        }\n      }\n      \n      // Update appointment with total amount and mark as completed\n      console.log(\"[v0] ðŸ“ Updating appointment status and amount...\")\n      try {\n        await appointmentService.update(selectedAppointment.id, {\n          status: \"completed\",\n          amount: totalAmount,\n        })\n        console.log(\"[v0] âœ… Appointment updated successfully\")\n      } catch (updateError) {\n        console.error(\"[v0] âŒ Failed to update appointment:\", updateError)\n        throw updateError\n      }\n      \n      // Update local state\n      console.log(\"[v0] ðŸ”„ Updating local state...\")\n      setAppointments((prev) => \n        prev.map((apt) => \n          apt.id === selectedAppointment.id \n            ? { ...apt, status: \"completed\", amount: totalAmount } \n            : apt\n        )\n      )\n      \n      // Close treatment modal and show completion modal\n      console.log(\"[v0] ðŸŽ‰ Showing completion modal...\")\n      setShowTreatmentModal(false)\n      setTreatmentCount(treatments.length)\n      setShowCompleteModal(true)\n      \n      // Reload appointments\n      console.log(\"[v0] ðŸ”„ Reloading appointments...\")\n      await loadData()\n      console.log(\"[v0] âœ… All done!\")\n    } catch (error) {\n      console.error(\"[v0] âŒ Error completing appointment:\", error)\n      console.error(\"[v0] Error details:\", {\n        message: error instanceof Error ? error.message : \"Unknown error\",\n        stack: error instanceof Error ? error.stack : undefined,\n        error: error\n      })\n      alert(\"Failed to complete appointment: \" + (error instanceof Error ? error.message : \"Unknown error\"))\n    }\n  }\n\n\n\n  const today = new Date().toISOString().split(\"T\")[0]\n  const pendingAppointments = appointments.filter((apt) => apt.status === \"pending\")\n  const approvedAppointments = appointments.filter((apt) => apt.status === \"confirmed\" || apt.status === \"attended\" || apt.status === \"in-progress\")\n  // Today's appointments should include ALL appointments for today (matching Schedule tab logic)\n  const todayAppointments = appointments.filter((apt) => apt.date === today)\n\n  const navItems = [\n    { label: \"Dashboard\", icon: <LayoutDashboard className=\"w-5 h-5\" />, href: \"/dentist/dashboard\" },\n    { label: \"My Schedule\", icon: <Calendar className=\"w-5 h-5\" />, href: \"/dentist/schedule\" },\n    { label: \"Treatments\", icon: <Tooth className=\"w-5 h-5\" />, href: \"/dentist/treatments\" },\n    { label: \"Earnings\", icon: <DollarSign className=\"w-5 h-5\" />, href: \"/dentist/earnings\" },\n    { label: \"Reports\", icon: <BarChart3 className=\"w-5 h-5\" />, href: \"/dentist/reports\" },\n  ]\n\n  return (\n    <MainLayout navItems={navItems} title=\"Dentist Schedule\">\n      <div className=\"space-y-6\">\n        {/* Welcome Section */}\n        <div className=\"bg-gradient-to-r from-primary to-accent rounded-xl p-8 text-primary-foreground shadow-lg\">\n          <h1 className=\"text-4xl font-bold mb-2\">Welcome, {user?.name}</h1>\n          <p className=\"text-lg opacity-90\">Manage your appointments and patient treatments</p>\n        </div>\n\n        {/* Quick Stats */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n          <Card className=\"border-2 hover:border-primary hover:shadow-lg transition-all\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-sm font-semibold text-muted-foreground uppercase tracking-wide\">Today's Appointments</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-4xl font-bold text-primary\">{todayAppointments.length}</div>\n              <p className=\"text-sm text-muted-foreground mt-2\">All confirmed</p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"border-2 hover:border-yellow-500 hover:shadow-lg transition-all\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-sm font-semibold text-muted-foreground uppercase tracking-wide\">Pending Approvals</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-4xl font-bold text-yellow-600\">{pendingAppointments.length}</div>\n              <p className=\"text-sm text-muted-foreground mt-2\">Awaiting action</p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"border-2 hover:border-primary hover:shadow-lg transition-all\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-sm font-semibold text-muted-foreground uppercase tracking-wide\">This Week</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-4xl font-bold text-primary\">{approvedAppointments.length}</div>\n              <p className=\"text-sm text-muted-foreground mt-2\">Total appointments</p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"border-2 hover:border-green-500 hover:shadow-lg transition-all\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-sm font-semibold text-muted-foreground uppercase tracking-wide\">ðŸ’µ Total Earnings</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-4xl font-bold text-green-600\">â‚±{(stats.earnings || 0).toLocaleString()}</div>\n              <p className=\"text-sm text-muted-foreground mt-2\">From completed appointments</p>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Pending Approvals */}\n        <Card className=\"border-2 shadow-md\">\n          <CardHeader>\n            <CardTitle className=\"text-2xl font-bold\">Pending Appointment Approvals</CardTitle>\n            <CardDescription className=\"text-base\">Appointments awaiting your decision</CardDescription>\n          </CardHeader>\n          <CardContent>\n            {loading ? (\n              <div className=\"text-center py-8 text-muted-foreground\">Loading appointments...</div>\n            ) : pendingAppointments.length === 0 ? (\n              <div className=\"text-center py-8 text-muted-foreground\">No pending appointments</div>\n            ) : (\n              <div className=\"space-y-3\">\n                {pendingAppointments.map((apt) => (\n                  <div\n                    key={apt.id}\n                    className=\"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-muted/50 transition-colors\"\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center\">\n                        <span className=\"text-sm font-semibold text-primary\">\n                          {apt.patients?.name ? apt.patients.name.charAt(0) : \"?\"}\n                        </span>\n                      </div>\n                      <div>\n                        <p className=\"font-medium text-foreground\">{apt.patients?.name || \"Unknown Patient\"}</p>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {apt.date} at {apt.time}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <Button\n                        size=\"sm\"\n                        className=\"bg-green-600 hover:bg-green-700 text-white\"\n                        onClick={() => handleApproveAppointment(apt.id)}\n                        disabled={processingId === apt.id}\n                      >\n                        <CheckCircle className=\"w-4 h-4 mr-1\" />\n                        {processingId === apt.id ? \"...\" : \"Accept\"}\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        className=\"border-destructive text-destructive hover:bg-destructive/10 bg-transparent\"\n                        onClick={() => handleRejectAppointment(apt.id)}\n                        disabled={processingId === apt.id}\n                      >\n                        <XCircle className=\"w-4 h-4 mr-1\" />\n                        {processingId === apt.id ? \"...\" : \"Reject\"}\n                      </Button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Approved / Attended */}\n        <Card className=\"border-2 shadow-md\">\n          <CardHeader>\n            <CardTitle className=\"text-2xl font-bold\">Approved / Attended</CardTitle>\n            <CardDescription className=\"text-base\">Complete after visit</CardDescription>\n          </CardHeader>\n          <CardContent>\n            {approvedAppointments.length === 0 ? (\n              <div className=\"text-center py-8 text-muted-foreground\">No approved/attended appointments</div>\n            ) : (\n              <div className=\"space-y-3\">\n                {approvedAppointments.map((apt) => (\n                  <div\n                    key={apt.id}\n                    className=\"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-muted/50 transition-colors\"\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center\">\n                        <span className=\"text-sm font-semibold text-primary\">\n                          {apt.patients?.name ? apt.patients.name.charAt(0) : \"?\"}\n                        </span>\n                      </div>\n                      <div>\n                        <p className=\"font-medium text-foreground\">{apt.patients?.name || \"Unknown Patient\"}</p>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {apt.date} at {apt.time}\n                        </p>\n                        {apt.status === \"attended\" && (\n                          <p className=\"text-xs text-blue-600 font-semibold\">âœ“ Patient marked as attended - Ready to start</p>\n                        )}\n                        {apt.status === \"in-progress\" && (\n                          <p className=\"text-xs text-orange-600 font-semibold\">âš¡ Procedure in progress</p>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"flex gap-2\">\n                      {apt.status === \"attended\" && (\n                        <Button\n                          size=\"sm\"\n                          className=\"bg-blue-600 hover:bg-blue-700 text-white\"\n                          onClick={() => handleStartProcedure(apt)}\n                          disabled={processingId === apt.id}\n                        >\n                          <Tooth className=\"w-4 h-4 mr-1\" />\n                          {processingId === apt.id ? \"...\" : \"Start Procedure\"}\n                        </Button>\n                      )}\n                      {apt.status === \"in-progress\" && (\n                        <Button\n                          size=\"sm\"\n                          className=\"bg-orange-600 hover:bg-orange-700 text-white\"\n                          onClick={() => {\n                            setSelectedAppointment(apt)\n                            setShowTreatmentModal(true)\n                          }}\n                          disabled={processingId === apt.id}\n                        >\n                          <Tooth className=\"w-4 h-4 mr-1\" />\n                          {processingId === apt.id ? \"...\" : \"Add Treatments\"}\n                        </Button>\n                      )}\n                      {apt.status === \"confirmed\" && (\n                        <Button\n                          size=\"sm\"\n                          className=\"bg-gray-400 text-white cursor-not-allowed\"\n                          disabled\n                        >\n                          Waiting for Patient Check-in\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Today's Schedule */}\n        <Card className=\"border-2 shadow-md\">\n          <CardHeader>\n            <CardTitle className=\"text-2xl font-bold\">Today's Schedule</CardTitle>\n            <CardDescription className=\"text-base\">Your confirmed appointments for today</CardDescription>\n          </CardHeader>\n          <CardContent>\n            {todayAppointments.length === 0 ? (\n              <div className=\"text-center py-8 text-muted-foreground\">No appointments today</div>\n            ) : (\n              <div className=\"space-y-3\">\n                {todayAppointments.map((apt) => (\n                  <div key={apt.id} className=\"flex items-center justify-between p-3 border border-border rounded-lg\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"flex-1\">\n                        <p className=\"font-medium text-foreground\">{apt.patients?.name || \"Unknown Patient\"}</p>\n                        <p className=\"text-sm text-muted-foreground\">{apt.time}</p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full\">Confirmed</span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n      </div>\n\n      {/* Modals */}\n      {showTreatmentModal && selectedAppointment && (\n        <AppointmentTreatmentModal\n          appointment={selectedAppointment}\n          onClose={() => {\n            setShowTreatmentModal(false)\n            setSelectedAppointment(null)\n          }}\n          onSaveAndComplete={handleSaveAndComplete}\n        />\n      )}\n\n      {showCompleteModal && selectedAppointment && (\n        <AppointmentCompleteModal\n          appointment={selectedAppointment}\n          treatmentCount={treatmentCount}\n          onClose={() => {\n            setShowCompleteModal(false)\n            setSelectedAppointment(null)\n          }}\n        />\n      )}\n\n    </MainLayout>\n  )\n}\n","\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { X, User, Calendar, Stethoscope, Plus, Trash2, Package } from \"lucide-react\"\r\nimport { formatCurrency } from \"@/lib/utils\"\r\nimport { treatmentService } from \"@/lib/db-service\"\r\n\r\ninterface AppointmentTreatmentModalProps {\r\n  appointment: {\r\n    id: string\r\n    patient_id: string\r\n    dentist_id?: string\r\n    date: string\r\n    time: string\r\n    service?: string\r\n    amount?: number\r\n    patients?: { name: string; email?: string }\r\n    dentists?: { name: string }\r\n  }\r\n  onClose: () => void\r\n  onSaveAndComplete: (treatments: SelectedTreatment[], totalAmount: number) => Promise<void>\r\n}\r\n\r\ninterface Treatment {\r\n  id: string\r\n  name: string\r\n  category: string\r\n  description?: string\r\n  price: number\r\n  duration?: string\r\n}\r\n\r\ninterface SelectedTreatment {\r\n  treatment_id: string\r\n  name: string\r\n  price: number\r\n  quantity: number\r\n}\r\n\r\nexport default function AppointmentTreatmentModal({ appointment, onClose, onSaveAndComplete }: AppointmentTreatmentModalProps) {\r\n  const [allTreatments, setAllTreatments] = useState<Treatment[]>([])\r\n  const [selectedTreatments, setSelectedTreatments] = useState<SelectedTreatment[]>([])\r\n  const [searchTerm, setSearchTerm] = useState(\"\")\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    loadTreatments()\r\n  }, [])\r\n\r\n  const loadTreatments = async () => {\r\n    try {\r\n      const data = await treatmentService.getAll()\r\n      setAllTreatments(data || [])\r\n    } catch (error) {\r\n      console.error(\"Error loading treatments:\", error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const getSuggestedTreatments = () => {\r\n    if (!appointment.service) return []\r\n    \r\n    const service = appointment.service.toLowerCase()\r\n    const suggestions: string[] = []\r\n\r\n    if (service.includes(\"cleaning\")) {\r\n      suggestions.push(\"Professional Cleaning\", \"Scaling & Polishing\", \"Fluoride Treatment\")\r\n    } else if (service.includes(\"checkup\") || service.includes(\"examination\")) {\r\n      suggestions.push(\"Comprehensive Oral Exam\", \"X-Ray (Full Mouth)\", \"Periodontal Screening\")\r\n    } else if (service.includes(\"filling\")) {\r\n      suggestions.push(\"Composite Filling\", \"Amalgam Filling\", \"Temporary Filling\")\r\n    } else if (service.includes(\"extraction\")) {\r\n      suggestions.push(\"Simple Extraction\", \"Surgical Extraction\", \"Wisdom Tooth Extraction\")\r\n    } else if (service.includes(\"root canal\")) {\r\n      suggestions.push(\"Root Canal Treatment\", \"Endodontic Therapy\", \"Root Canal Retreatment\")\r\n    } else if (service.includes(\"crown\") || service.includes(\"bridge\")) {\r\n      suggestions.push(\"Porcelain Crown\", \"Metal Crown\", \"Bridge Installation\")\r\n    } else if (service.includes(\"whitening\") || service.includes(\"bleaching\")) {\r\n      suggestions.push(\"Teeth Whitening\", \"In-Office Bleaching\", \"Take-Home Whitening Kit\")\r\n    } else if (service.includes(\"orthodontic\") || service.includes(\"braces\")) {\r\n      suggestions.push(\"Orthodontic Consultation\", \"Braces Installation\", \"Retainer Fitting\")\r\n    }\r\n\r\n    return allTreatments.filter(t => \r\n      suggestions.some(s => t.name.toLowerCase().includes(s.toLowerCase()))\r\n    )\r\n  }\r\n\r\n  const filteredTreatments = searchTerm \r\n    ? allTreatments.filter(t => \r\n        t.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        t.category.toLowerCase().includes(searchTerm.toLowerCase())\r\n      )\r\n    : getSuggestedTreatments().length > 0 \r\n      ? getSuggestedTreatments() \r\n      : allTreatments\r\n\r\n  const addTreatment = (treatment: Treatment) => {\r\n    const existing = selectedTreatments.find(st => st.treatment_id === treatment.id)\r\n    if (existing) {\r\n      setSelectedTreatments(prev => \r\n        prev.map(st => \r\n          st.treatment_id === treatment.id \r\n            ? { ...st, quantity: st.quantity + 1 } \r\n            : st\r\n        )\r\n      )\r\n    } else {\r\n      setSelectedTreatments(prev => [...prev, {\r\n        treatment_id: treatment.id,\r\n        name: treatment.name,\r\n        price: treatment.price,\r\n        quantity: 1\r\n      }])\r\n    }\r\n  }\r\n\r\n  const removeTreatment = (treatment_id: string) => {\r\n    setSelectedTreatments(prev => prev.filter(st => st.treatment_id !== treatment_id))\r\n  }\r\n\r\n  const updateQuantity = (treatment_id: string, quantity: number) => {\r\n    if (quantity < 1) return\r\n    setSelectedTreatments(prev => \r\n      prev.map(st => \r\n        st.treatment_id === treatment_id ? { ...st, quantity } : st\r\n      )\r\n    )\r\n  }\r\n\r\n  const totalAmount = selectedTreatments.reduce((sum, st) => sum + (st.price * st.quantity), 0)\r\n\r\n  const handleComplete = async () => {\r\n    if (selectedTreatments.length === 0) {\r\n      alert(\"Please add at least one treatment before completing.\")\r\n      return\r\n    }\r\n    \r\n    try {\r\n      await onSaveAndComplete(selectedTreatments, totalAmount)\r\n    } catch (error) {\r\n      console.error(\"Error saving treatments:\", error)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-card rounded-xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-y-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border sticky top-0 bg-card z-10\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-foreground\">Add Treatments - Procedure in Progress</h2>\r\n            <p className=\"text-sm text-muted-foreground mt-1\">\r\n              Select treatments performed for {appointment.patients?.name}\r\n            </p>\r\n          </div>\r\n          <button onClick={onClose} className=\"p-2 hover:bg-muted rounded-lg transition-colors\">\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-6 space-y-6\">\r\n          {/* Patient Info */}\r\n          <div className=\"bg-blue-50 border-2 border-blue-200 rounded-lg p-4\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\r\n                  <User className=\"w-5 h-5 text-blue-600\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-xs text-blue-600 font-medium\">Patient</p>\r\n                  <p className=\"font-bold text-blue-900\">{appointment.patients?.name}</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\r\n                  <Calendar className=\"w-5 h-5 text-blue-600\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-xs text-blue-600 font-medium\">Appointment</p>\r\n                  <p className=\"font-bold text-blue-900\">{appointment.date} at {appointment.time}</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\r\n                  <Stethoscope className=\"w-5 h-5 text-blue-600\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-xs text-blue-600 font-medium\">Service</p>\r\n                  <p className=\"font-bold text-blue-900\">{appointment.service || \"General Treatment\"}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n            {/* Available Treatments */}\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <h3 className=\"text-lg font-bold mb-2\">\r\n                  {getSuggestedTreatments().length > 0 ? \"Suggested Treatments\" : \"All Treatments\"}\r\n                </h3>\r\n                <Input\r\n                  placeholder=\"Search treatments...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  className=\"mb-3\"\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"border-2 border-border rounded-lg p-4 space-y-2 max-h-[400px] overflow-y-auto\">\r\n                {loading ? (\r\n                  <p className=\"text-center text-muted-foreground py-4\">Loading treatments...</p>\r\n                ) : filteredTreatments.length === 0 ? (\r\n                  <p className=\"text-center text-muted-foreground py-4\">No treatments found</p>\r\n                ) : (\r\n                  filteredTreatments.map((treatment) => (\r\n                    <button\r\n                      key={treatment.id}\r\n                      onClick={() => addTreatment(treatment)}\r\n                      className=\"w-full p-3 border border-border rounded-lg hover:bg-muted hover:border-primary transition-all text-left group\"\r\n                    >\r\n                      <div className=\"flex items-start justify-between\">\r\n                        <div className=\"flex-1\">\r\n                          <p className=\"font-bold text-foreground group-hover:text-primary\">{treatment.name}</p>\r\n                          <p className=\"text-xs text-muted-foreground\">{treatment.category}</p>\r\n                          {treatment.description && (\r\n                            <p className=\"text-xs text-muted-foreground mt-1\">{treatment.description}</p>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"text-right ml-3\">\r\n                          <p className=\"font-bold text-primary\">{formatCurrency(treatment.price)}</p>\r\n                          {treatment.duration && (\r\n                            <p className=\"text-xs text-muted-foreground\">{treatment.duration}</p>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </button>\r\n                  ))\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Selected Treatments */}\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"text-lg font-bold\">Selected Treatments ({selectedTreatments.length})</h3>\r\n              \r\n              <div className=\"border-2 border-primary rounded-lg p-4 space-y-3 min-h-[400px]\">\r\n                {selectedTreatments.length === 0 ? (\r\n                  <div className=\"text-center py-12 text-muted-foreground\">\r\n                    <Package className=\"w-12 h-12 mx-auto mb-2 opacity-30\" />\r\n                    <p>No treatments selected yet</p>\r\n                    <p className=\"text-sm\">Click on treatments from the left to add them</p>\r\n                  </div>\r\n                ) : (\r\n                  <>\r\n                    {selectedTreatments.map((st) => (\r\n                      <div key={st.treatment_id} className=\"p-3 bg-muted rounded-lg\">\r\n                        <div className=\"flex items-center justify-between mb-2\">\r\n                          <p className=\"font-bold text-foreground\">{st.name}</p>\r\n                          <button\r\n                            onClick={() => removeTreatment(st.treatment_id)}\r\n                            className=\"p-1 hover:bg-destructive/10 rounded text-destructive\"\r\n                          >\r\n                            <Trash2 className=\"w-4 h-4\" />\r\n                          </button>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-3\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <button\r\n                              onClick={() => updateQuantity(st.treatment_id, st.quantity - 1)}\r\n                              className=\"w-7 h-7 border border-border rounded hover:bg-background\"\r\n                            >\r\n                              -\r\n                            </button>\r\n                            <Input\r\n                              type=\"number\"\r\n                              value={st.quantity}\r\n                              onChange={(e) => updateQuantity(st.treatment_id, parseInt(e.target.value) || 1)}\r\n                              className=\"w-16 h-7 text-center\"\r\n                              min=\"1\"\r\n                            />\r\n                            <button\r\n                              onClick={() => updateQuantity(st.treatment_id, st.quantity + 1)}\r\n                              className=\"w-7 h-7 border border-border rounded hover:bg-background\"\r\n                            >\r\n                              +\r\n                            </button>\r\n                          </div>\r\n                          <div className=\"flex-1 text-right\">\r\n                            <p className=\"text-sm text-muted-foreground\">\r\n                              {formatCurrency(st.price)} Ã— {st.quantity}\r\n                            </p>\r\n                            <p className=\"font-bold text-primary\">\r\n                              {formatCurrency(st.price * st.quantity)}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n\r\n                    <div className=\"border-t-2 border-primary pt-3 mt-4\">\r\n                      <div className=\"flex items-center justify-between mb-2\">\r\n                        <span className=\"text-lg font-bold text-foreground\">Total Amount:</span>\r\n                        <span className=\"text-2xl font-bold text-primary\">{formatCurrency(totalAmount)}</span>\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">\r\n                        This amount will be charged to the patient\r\n                      </p>\r\n                    </div>\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex gap-3 pt-4 border-t\">\r\n            <Button \r\n              onClick={onClose} \r\n              variant=\"outline\" \r\n              className=\"flex-1 h-12\"\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button \r\n              onClick={handleComplete}\r\n              className=\"flex-1 h-12 bg-green-600 hover:bg-green-700 text-white font-bold\"\r\n              disabled={selectedTreatments.length === 0}\r\n            >\r\n              Save & Complete Appointment\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","\"use client\"\r\n\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { CheckCircle, User, Calendar, Package, DollarSign, ArrowRight } from \"lucide-react\"\r\nimport { formatCurrency } from \"@/lib/utils\"\r\nimport { useRouter } from \"next/navigation\"\r\n\r\ninterface AppointmentCompleteModalProps {\r\n  appointment: {\r\n    patients?: { name: string }\r\n    service?: string\r\n    date: string\r\n    amount?: number\r\n  }\r\n  treatmentCount?: number\r\n  onClose: () => void\r\n}\r\n\r\nexport default function AppointmentCompleteModal({ appointment, treatmentCount, onClose }: AppointmentCompleteModalProps) {\r\n  const router = useRouter()\r\n\r\n  const handleLoginAsHR = () => {\r\n    // Clear current user and redirect to login\r\n    localStorage.removeItem(\"user\")\r\n    router.push(\"/login\")\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-card rounded-xl shadow-2xl max-w-md w-full\">\r\n        <div className=\"p-6 text-center space-y-6\">\r\n          {/* Success Icon */}\r\n          <div className=\"w-20 h-20 bg-green-100 rounded-full mx-auto flex items-center justify-center\">\r\n            <CheckCircle className=\"w-12 h-12 text-green-600\" />\r\n          </div>\r\n          \r\n          {/* Title */}\r\n          <div>\r\n            <h2 className=\"text-3xl font-bold text-foreground mb-2\">Appointment Completed!</h2>\r\n            <p className=\"text-muted-foreground\">\r\n              Treatment has been successfully completed\r\n            </p>\r\n          </div>\r\n\r\n          {/* Appointment Details */}\r\n          <div className=\"bg-muted/50 rounded-lg p-4 text-left space-y-3\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                <User className=\"w-5 h-5 text-primary\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-xs text-muted-foreground\">Patient</p>\r\n                <p className=\"font-bold text-foreground\">{appointment.patients?.name || \"Unknown\"}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                <Package className=\"w-5 h-5 text-primary\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-xs text-muted-foreground\">Service</p>\r\n                <p className=\"font-bold text-foreground\">{appointment.service || \"Treatment\"}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                <Calendar className=\"w-5 h-5 text-primary\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-xs text-muted-foreground\">Date</p>\r\n                <p className=\"font-bold text-foreground\">{appointment.date}</p>\r\n              </div>\r\n            </div>\r\n\r\n            {treatmentCount && treatmentCount > 0 && (\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                  <Package className=\"w-5 h-5 text-primary\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-xs text-muted-foreground\">Treatments Added</p>\r\n                  <p className=\"font-bold text-foreground\">{treatmentCount} treatment(s)</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {appointment.amount && appointment.amount > 0 && (\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                  <DollarSign className=\"w-5 h-5 text-green-600\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-xs text-muted-foreground\">Total Amount</p>\r\n                  <p className=\"font-bold text-green-600 text-lg\">{formatCurrency(appointment.amount)}</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Next Steps */}\r\n          <div className=\"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 text-left\">\r\n            <p className=\"font-bold text-blue-900 mb-2\">ðŸ“‹ Next Step: Payment Recording</p>\r\n            <p className=\"text-sm text-blue-700\">\r\n              Please inform the HR/Admin staff to record the payment for this completed appointment. \r\n              The payment will be processed and your earnings will be updated automatically.\r\n            </p>\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex flex-col gap-3\">\r\n            <Button\r\n              onClick={handleLoginAsHR}\r\n              className=\"w-full h-12 bg-primary hover:bg-primary/90 text-primary-foreground font-bold text-lg\"\r\n            >\r\n              Log in as HR\r\n              <ArrowRight className=\"w-5 h-5 ml-2\" />\r\n            </Button>\r\n            <Button\r\n              onClick={onClose}\r\n              variant=\"outline\"\r\n              className=\"w-full h-10\"\r\n            >\r\n              Stay on Dashboard\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}