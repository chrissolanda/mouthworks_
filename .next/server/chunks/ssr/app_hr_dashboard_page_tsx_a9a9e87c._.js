module.exports=[66483,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(21937),e=a.i(96313),f=a.i(3130),g=a.i(30617),h=a.i(60246),i=a.i(41675),j=a.i(34422),k=a.i(11156),l=a.i(83497),m=a.i(39761),n=a.i(21161),o=a.i(15618),p=a.i(16201),q=a.i(41710),r=a.i(38246),s=a.i(2288),t=a.i(97895);function u(){let{user:a}=(0,d.useAuth)(),[u,v]=(0,c.useState)({totalPatients:0,todayAppointments:0,pendingPayments:0,lowStockItems:0,needDentistAssignment:0,confirmedAppointments:0,readyForPayment:0,inProgress:0}),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)(!0),A=async()=>{try{console.log("[v0] Dashboard: Loading all data at",new Date().toISOString());let[a,b,c,d]=await Promise.all([s.patientService.getAll().catch(()=>[]),s.appointmentService.getAll().catch(()=>[]),s.paymentService.getAll().catch(()=>[]),s.inventoryService.getAll().catch(()=>[])]),e=new Date,f=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,g=(b||[]).slice(0,5).map(a=>({id:a.id,date:a.date,dateType:typeof a.date,patient:a.patients?.name}));fetch("http://127.0.0.1:7242/ingest/c0a6aa0c-74d6-4100-87e9-5e0b60c6253b",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"app/hr/dashboard/page.tsx:52",message:"Date filtering - sample dates",data:{today:f,appointmentsCount:b?.length||0,sampleDates:g},timestamp:Date.now(),sessionId:"debug-session",runId:"dashboard-fix-v2",hypothesisId:"A"})}).catch(()=>{});let h=(b||[]).filter(a=>{if(!a.date)return!1;let b="";if("string"==typeof a.date)b=a.date.split("T")[0].split(" ")[0];else if(a.date instanceof Date)b=`${a.date.getFullYear()}-${String(a.date.getMonth()+1).padStart(2,"0")}-${String(a.date.getDate()).padStart(2,"0")}`;else try{let c=new Date(a.date);b=`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}-${String(c.getDate()).padStart(2,"0")}`}catch{return!1}let c=b===f;return c&&fetch("http://127.0.0.1:7242/ingest/c0a6aa0c-74d6-4100-87e9-5e0b60c6253b",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"app/hr/dashboard/page.tsx:75",message:"MATCH - Appointment for today",data:{appointmentId:a.id,appointmentDate:b,today:f,patientName:a.patients?.name,originalDate:a.date},timestamp:Date.now(),sessionId:"debug-session",runId:"dashboard-fix-v2",hypothesisId:"A"})}).catch(()=>{}),c});fetch("http://127.0.0.1:7242/ingest/c0a6aa0c-74d6-4100-87e9-5e0b60c6253b",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"app/hr/dashboard/page.tsx:85",message:"Today appointments result",data:{todayApptsCount:h.length,today:f,allAppointmentsCount:b?.length||0},timestamp:Date.now(),sessionId:"debug-session",runId:"dashboard-fix-v2",hypothesisId:"A"})}).catch(()=>{});let i=(c||[]).filter(a=>"paid"!==a.status).reduce((a,b)=>a+(b.amount||0),0),j=(d||[]).filter(a=>"low"===a.status||"critical"===a.status).length,k=(b||[]).filter(a=>{let b=a.status?.toLowerCase()||"";return"pending"===b&&!a.dentist_id}).length,l=(b||[]).filter(a=>"confirmed"===a.status).length,m=(b||[]).filter(a=>"completed"===a.status).length,n=(b||[]).filter(a=>"in-progress"===a.status).length;v({totalPatients:a?.length||0,todayAppointments:h?.length||0,pendingPayments:i||0,lowStockItems:j||0,needDentistAssignment:k||0,confirmedAppointments:l||0,readyForPayment:m||0,inProgress:n||0}),x((h||[]).slice(0,4)),console.log("[v0] Dashboard: Data loaded successfully at",new Date().toISOString()),console.log("[v0] Dashboard: Stats - needAssignment:",k,"pendingPayments:",i,"todayAppts:",h.length,"total appointments:",b?.length)}catch(a){console.error("[v0] Error loading dashboard:",a instanceof Error?a.message:a),v({totalPatients:0,todayAppointments:0,pendingPayments:0,lowStockItems:0,needDentistAssignment:0,confirmedAppointments:0,readyForPayment:0,inProgress:0}),x([])}finally{z(!1)}};(0,c.useEffect)(()=>{A();let a=setInterval(()=>{A()},3e3),b=a=>{let b=a?.type||"unknown";console.log(`[v0] Dashboard: Data change event received (${b}), refreshing immediately...`),A().catch(a=>{console.error("[v0] Dashboard: Error during sync refresh:",a)})},c=a=>{"dataChanged"===a.key&&(console.log("[v0] Dashboard: Storage event detected, refreshing..."),A().catch(a=>{console.error("[v0] Dashboard: Error during storage sync refresh:",a)}))};window.addEventListener("storage",c);let d=["appointmentCreated","appointmentUpdated","appointmentDeleted","paymentRecorded","paymentDeleted","paymentUpdated","inventoryUpdated","inventoryCreated","inventoryDeleted","patientCreated","patientUpdated","patientDeleted","treatmentCreated","treatmentUpdated","treatmentDeleted","dentistCreated","dentistUpdated","dentistDeleted","staffCreated","staffUpdated","staffDeleted","dataChanged"];return d.forEach(a=>{window.addEventListener(a,b)}),()=>{clearInterval(a),d.forEach(a=>{window.removeEventListener(a,b)}),window.removeEventListener("storage",c)}},[]);let B=[{label:"Dashboard",icon:(0,b.jsx)(g.LayoutDashboard,{className:"w-5 h-5"}),href:"/hr/dashboard"},{label:"Patients",icon:(0,b.jsx)(h.Users,{className:"w-5 h-5"}),href:"/hr/patients"},{label:"Appointments",icon:(0,b.jsx)(i.Calendar,{className:"w-5 h-5"}),href:"/hr/appointments"},{label:"Treatments",icon:(0,b.jsx)(j.Bluetooth,{className:"w-5 h-5"}),href:"/hr/treatments"},{label:"Payments",icon:(0,b.jsx)(k.CreditCard,{className:"w-5 h-5"}),href:"/hr/payments"},{label:"Inventory",icon:(0,b.jsx)(l.Package,{className:"w-5 h-5"}),href:"/hr/inventory"},{label:"Reports",icon:(0,b.jsx)(m.BarChart3,{className:"w-5 h-5"}),href:"/hr/reports"},{label:"Settings",icon:(0,b.jsx)(n.Settings,{className:"w-5 h-5"}),href:"/hr/settings"}];return(0,b.jsx)(e.default,{navItems:B,title:"HR/Admin Dashboard",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-primary to-accent rounded-xl p-8 text-primary-foreground shadow-lg",children:[(0,b.jsxs)("h1",{className:"text-4xl font-bold mb-2",children:["Welcome, ",a?.name]}),(0,b.jsx)("p",{className:"text-lg opacity-90",children:"Manage clinic operations and schedule appointments"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,b.jsxs)(f.Card,{className:"border-2 hover:border-primary hover:shadow-lg transition-all",children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.CardTitle,{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Total Patients"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"text-4xl font-bold text-primary",children:u.totalPatients}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Active patients"})]})]}),(0,b.jsxs)(f.Card,{className:"border-2 hover:border-primary hover:shadow-lg transition-all",children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.CardTitle,{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Today's Appointments"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"text-4xl font-bold text-primary",children:u.todayAppointments}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Scheduled today"})]})]}),(0,b.jsxs)(f.Card,{className:"border-2 hover:border-destructive hover:shadow-lg transition-all",children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.CardTitle,{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Pending Payments"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"text-4xl font-bold text-destructive",children:(0,t.formatCurrency)(u.pendingPayments)}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Unpaid invoices"})]})]}),(0,b.jsxs)(f.Card,{className:"border-2 hover:border-accent hover:shadow-lg transition-all",children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.CardTitle,{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Low Stock Items"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"text-4xl font-bold text-accent",children:u.lowStockItems}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Need restocking"})]})]})]}),(0,b.jsxs)(f.Card,{className:"border-2 shadow-lg",children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsxs)(f.CardTitle,{className:"text-2xl font-bold flex items-center gap-2",children:[(0,b.jsx)(i.Calendar,{className:"w-6 h-6 text-primary"}),"Appointment Status Overview"]}),(0,b.jsx)(f.CardDescription,{children:"Quick view of all appointment states"})]}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsx)(r.default,{href:"/hr/appointments",children:(0,b.jsxs)("div",{className:"p-4 bg-red-50 border-2 border-red-200 rounded-lg hover:border-red-400 hover:shadow-md transition-all cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-red-700",children:"Need Dentist"}),(0,b.jsx)("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(q.Clock,{className:"w-4 h-4 text-red-600"})})]}),(0,b.jsx)("div",{className:"text-3xl font-bold text-red-600",children:u.needDentistAssignment}),(0,b.jsx)("p",{className:"text-xs text-red-600 mt-1",children:"Awaiting assignment"})]})}),(0,b.jsx)(r.default,{href:"/hr/appointments",children:(0,b.jsxs)("div",{className:"p-4 bg-purple-50 border-2 border-purple-200 rounded-lg hover:border-purple-400 hover:shadow-md transition-all cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-purple-700",children:"Confirmed"}),(0,b.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(p.CheckCircle,{className:"w-4 h-4 text-purple-600"})})]}),(0,b.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:u.confirmedAppointments}),(0,b.jsx)("p",{className:"text-xs text-purple-600 mt-1",children:"Ready for check-in"})]})}),(0,b.jsx)(r.default,{href:"/hr/appointments",children:(0,b.jsxs)("div",{className:"p-4 bg-orange-50 border-2 border-orange-200 rounded-lg hover:border-orange-400 hover:shadow-md transition-all cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-orange-700",children:"In Progress"}),(0,b.jsx)("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(j.Bluetooth,{className:"w-4 h-4 text-orange-600"})})]}),(0,b.jsx)("div",{className:"text-3xl font-bold text-orange-600",children:u.inProgress}),(0,b.jsx)("p",{className:"text-xs text-orange-600 mt-1",children:"Treatment ongoing"})]})}),(0,b.jsx)(r.default,{href:"/hr/appointments",children:(0,b.jsxs)("div",{className:"p-4 bg-green-50 border-2 border-green-200 rounded-lg hover:border-green-400 hover:shadow-md transition-all cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-green-700",children:"Ready for Payment"}),(0,b.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(k.CreditCard,{className:"w-4 h-4 text-green-600"})})]}),(0,b.jsx)("div",{className:"text-3xl font-bold text-green-600",children:u.readyForPayment}),(0,b.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"Completed appointments"})]})})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsx)(r.default,{href:"/hr/appointments",className:"block",children:(0,b.jsxs)(f.Card,{className:"border-2 hover:border-primary hover:shadow-xl transition-all cursor-pointer h-full group",children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg group-hover:bg-primary/20 transition-colors",children:(0,b.jsx)(o.Plus,{className:"w-5 h-5 text-primary"})}),(0,b.jsx)(f.CardTitle,{className:"text-lg font-bold",children:"New Appointment"})]})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Schedule appointment with dentist"})})]})}),(0,b.jsx)(r.default,{href:"/hr/patients",className:"block",children:(0,b.jsxs)(f.Card,{className:"border-2 hover:border-primary hover:shadow-xl transition-all cursor-pointer h-full group",children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg group-hover:bg-primary/20 transition-colors",children:(0,b.jsx)(o.Plus,{className:"w-5 h-5 text-primary"})}),(0,b.jsx)(f.CardTitle,{className:"text-lg font-bold",children:"New Patient"})]})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Register new patient in system"})})]})}),(0,b.jsx)(r.default,{href:"/hr/payments",className:"block",children:(0,b.jsxs)(f.Card,{className:"border-2 hover:border-primary hover:shadow-xl transition-all cursor-pointer h-full group",children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg group-hover:bg-primary/20 transition-colors",children:(0,b.jsx)(o.Plus,{className:"w-5 h-5 text-primary"})}),(0,b.jsx)(f.CardTitle,{className:"text-lg font-bold",children:"Record Payment"})]})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Log patient payment"})})]})})]}),(0,b.jsxs)(f.Card,{className:"border-2 shadow-md",children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{className:"text-2xl font-bold",children:"Today's Appointments"}),(0,b.jsx)(f.CardDescription,{className:"text-base",children:"All appointments scheduled for today"})]}),(0,b.jsx)(f.CardContent,{children:y?(0,b.jsx)("div",{className:"text-center py-4 text-muted-foreground",children:"Loading..."}):0===w.length?(0,b.jsx)("div",{className:"text-center py-4 text-muted-foreground",children:"No appointments today"}):(0,b.jsx)("div",{className:"space-y-3",children:w.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg hover:bg-muted/50 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-foreground",children:a.patients?.name}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.time," - ",a.service]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:a.dentists?.name||"TBD"}),"confirmed"===a.status?(0,b.jsx)(p.CheckCircle,{className:"w-4 h-4 text-green-600"}):(0,b.jsx)(q.Clock,{className:"w-4 h-4 text-yellow-600"})]})]},a.id))})})]})]})})}a.s(["default",()=>u])}];

//# sourceMappingURL=app_hr_dashboard_page_tsx_a9a9e87c._.js.map