module.exports=[21486,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(21937),e=a.i(96313),f=a.i(3130),g=a.i(40695),h=a.i(5522),i=a.i(30617),j=a.i(60246),k=a.i(41675),l=a.i(34422),m=a.i(11156),n=a.i(83497),o=a.i(39761),p=a.i(21161),q=a.i(15618),r=a.i(81560),s=a.i(87532),t=a.i(92e3);let u=(0,a.i(70106).default)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);var v=a.i(2288),w=a.i(33508);function x({onClose:a,onSubmit:d}){let[e,f]=(0,c.useState)({name:"",quantity:"",minQuantity:"",category:"Supplies",supplier:""}),i=a=>{let{name:b,value:c}=a.target;f(a=>({...a,[b]:c}))};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-card rounded-lg shadow-2xl max-w-md w-full max-h-96 overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border sticky top-0 bg-card",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Add Inventory Item"}),(0,b.jsx)("button",{onClick:a,className:"p-1 hover:bg-muted rounded-lg transition-colors",children:(0,b.jsx)(w.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),e.name&&e.quantity&&e.minQuantity&&(d({...e,quantity:Number.parseInt(e.quantity),minQuantity:Number.parseInt(e.minQuantity)}),f({name:"",quantity:"",minQuantity:"",category:"Supplies",supplier:""}))},className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Item Name"}),(0,b.jsx)(h.Input,{name:"name",value:e.name,onChange:i,placeholder:"e.g., Latex Gloves",className:"border-border",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Quantity"}),(0,b.jsx)(h.Input,{name:"quantity",type:"number",value:e.quantity,onChange:i,placeholder:"0",className:"border-border",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Minimum Level"}),(0,b.jsx)(h.Input,{name:"minQuantity",type:"number",value:e.minQuantity,onChange:i,placeholder:"0",className:"border-border",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Category"}),(0,b.jsxs)("select",{name:"category",value:e.category,onChange:i,className:"w-full px-3 py-2 border border-border rounded-lg",children:[(0,b.jsx)("option",{children:"Supplies"}),(0,b.jsx)("option",{children:"Medication"}),(0,b.jsx)("option",{children:"Orthodontic"}),(0,b.jsx)("option",{children:"Material"}),(0,b.jsx)("option",{children:"Equipment"}),(0,b.jsx)("option",{children:"Other"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Supplier"}),(0,b.jsx)(h.Input,{name:"supplier",value:e.supplier,onChange:i,placeholder:"Supplier name",className:"border-border"})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,b.jsx)(g.Button,{type:"button",onClick:a,variant:"outline",className:"flex-1 bg-transparent",children:"Cancel"}),(0,b.jsx)(g.Button,{type:"submit",className:"flex-1 bg-primary hover:bg-primary/90 text-primary-foreground",children:"Add Item"})]})]})]})})}function y(){let{user:a}=(0,d.useAuth)(),[w,y]=(0,c.useState)([]),[z,A]=(0,c.useState)([]),[B,C]=(0,c.useState)(!0),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)("");(0,c.useEffect)(()=>{H()},[]);let H=async()=>{try{C(!0);let[a,b]=await Promise.all([v.inventoryService.getAll(),v.supplyRequestService.getAll()]),c=(a||[]).map(a=>{let b="ok";return a.quantity<=0?b="critical":a.quantity<=a.min_quantity&&(b="low"),{...a,status:b}});y(c),A(b||[])}catch(a){console.error("[v0] Error loading inventory:",a)}finally{C(!1)}},I=[{label:"Dashboard",icon:(0,b.jsx)(i.LayoutDashboard,{className:"w-5 h-5"}),href:"/hr/dashboard"},{label:"Patients",icon:(0,b.jsx)(j.Users,{className:"w-5 h-5"}),href:"/hr/patients"},{label:"Appointments",icon:(0,b.jsx)(k.Calendar,{className:"w-5 h-5"}),href:"/hr/appointments"},{label:"Treatments",icon:(0,b.jsx)(l.Bluetooth,{className:"w-5 h-5"}),href:"/hr/treatments"},{label:"Payments",icon:(0,b.jsx)(m.CreditCard,{className:"w-5 h-5"}),href:"/hr/payments"},{label:"Inventory",icon:(0,b.jsx)(n.Package,{className:"w-5 h-5"}),href:"/hr/inventory"},{label:"Reports",icon:(0,b.jsx)(o.BarChart3,{className:"w-5 h-5"}),href:"/hr/reports"},{label:"Settings",icon:(0,b.jsx)(p.Settings,{className:"w-5 h-5"}),href:"/hr/settings"}],J=async a=>{try{let b=await v.inventoryService.create(a);y([b,...w]),E(!1)}catch(a){console.error("[v0] Error adding inventory:",a instanceof Error?a.message:JSON.stringify(a))}},K=async a=>{if(confirm("Are you sure?"))try{await v.inventoryService.delete(a),y(w.filter(b=>b.id!==a))}catch(a){console.error("[v0] Error deleting inventory:",a)}},L=async a=>{try{let b=await v.supplyRequestService.update(a,{status:"approved"});A(z.map(c=>c.id===a?b:c))}catch(a){console.error("[v0] Error approving request:",a)}},M=async a=>{try{let b=await v.supplyRequestService.update(a,{status:"rejected"});A(z.map(c=>c.id===a?b:c))}catch(a){console.error("[v0] Error rejecting request:",a)}},N=w.filter(a=>a.name.toLowerCase().includes(F.toLowerCase())||a.category?.toLowerCase().includes(F.toLowerCase())),O=w.filter(a=>"ok"!==a.status);return(0,b.jsxs)(e.default,{navItems:I,title:"Inventory Management",children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Inventory Management"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Track dental supplies and materials"})]}),(0,b.jsxs)(g.Button,{onClick:()=>E(!0),className:"bg-primary hover:bg-primary/90 text-primary-foreground gap-2",children:[(0,b.jsx)(q.Plus,{className:"w-4 h-4"}),"Add Item"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)(f.Card,{className:"hover:shadow-md transition-shadow",children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total Items"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-primary",children:w.length}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"In stock"})]})]}),(0,b.jsxs)(f.Card,{className:"hover:shadow-md transition-shadow",children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Low Stock"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-yellow-600",children:O.length}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Need attention"})]})]}),(0,b.jsxs)(f.Card,{className:"hover:shadow-md transition-shadow",children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Critical"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-destructive",children:w.filter(a=>"critical"===a.status).length}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Urgent restock"})]})]}),(0,b.jsxs)(f.Card,{className:"hover:shadow-md transition-shadow",children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Pending Requests"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:z.filter(a=>"pending"===a.status).length}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Staff requests"})]})]})]}),(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(s.Search,{className:"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground"}),(0,b.jsx)(h.Input,{type:"text",placeholder:"Search by item name or category...",value:F,onChange:a=>G(a.target.value),className:"pl-10 border-border"})]})})}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Stock Inventory"}),(0,b.jsxs)(f.CardDescription,{children:[N.length," item(s)"]})]}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-border",children:[(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Item Name"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Category"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Quantity"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Min Level"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Supplier"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Status"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:N.map(a=>{let c=z.filter(b=>b.item_id===a.id&&"pending"===b.status);return(0,b.jsxs)("tr",{className:"border-b border-border hover:bg-muted/50 transition-colors",children:[(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:a.name}),c.length>0&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 w-fit px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700",children:[(0,b.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-700 rounded-full"}),c.length," pending request",1!==c.length?"s":""]})]})}),(0,b.jsx)("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:a.category||"-"}),(0,b.jsx)("td",{className:"py-3 px-4 text-sm font-semibold text-foreground",children:a.quantity}),(0,b.jsx)("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:a.min_quantity}),(0,b.jsx)("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:a.supplier||"-"}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsx)("div",{className:"flex flex-col gap-2",children:(0,b.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold w-fit ${"ok"===a.status?"bg-green-100 text-green-700":"low"===a.status?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:["critical"===a.status&&(0,b.jsx)(t.AlertCircle,{className:"w-3 h-3"}),"low"===a.status&&(0,b.jsx)(u,{className:"w-3 h-3"}),a.status.charAt(0).toUpperCase()+a.status.slice(1)]})})}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsx)("button",{onClick:()=>K(a.id),className:"p-1.5 hover:bg-destructive/10 rounded-lg transition-colors text-destructive",children:(0,b.jsx)(r.Trash2,{className:"w-4 h-4"})})})]},a.id)})})]})})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Supply Requests from Staff & Dentists"}),(0,b.jsxs)(f.CardDescription,{children:[z.filter(a=>"pending"===a.status).length," pending request(s)"]})]}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("div",{className:"space-y-3",children:0===z.length?(0,b.jsx)("p",{className:"text-center text-muted-foreground py-4",children:"No requests"}):z.map(a=>(0,b.jsxs)("div",{className:`p-4 border rounded-lg ${"pending"===a.status?"border-yellow-200 bg-yellow-50/50":"approved"===a.status?"border-green-200 bg-green-50/50":"border-red-200 bg-red-50/50"}`,children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-foreground",children:a.inventory?.name||"Unknown Item"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Requested by: ",a.dentists?.name||a.staff?.name||"Unknown"]})]}),(0,b.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${"pending"===a.status?"bg-yellow-100 text-yellow-700":"approved"===a.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:a.status.charAt(0).toUpperCase()+a.status.slice(1)})]}),(0,b.jsxs)("p",{className:"text-sm text-foreground mb-2",children:["Quantity: ",a.quantity]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mb-3",children:["Date: ",a.requested_date?new Date(a.requested_date).toLocaleDateString():"-"]}),"pending"===a.status&&(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Button,{size:"sm",onClick:()=>L(a.id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white text-xs",children:"Approve"}),(0,b.jsx)(g.Button,{size:"sm",onClick:()=>M(a.id),variant:"outline",className:"flex-1 text-xs text-destructive hover:bg-destructive/10",children:"Reject"})]})]},a.id))})})]})]}),D&&(0,b.jsx)(x,{onClose:()=>E(!1),onSubmit:J})]})}a.s(["default",()=>y],21486)}];

//# sourceMappingURL=app_hr_inventory_page_tsx_27569b1b._.js.map